(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1255:function(e,r,t){Promise.resolve().then(t.bind(t,9629))},9629:function(e,r,t){"use strict";t.d(r,{default:function(){return Z}});var a=t(7437),s=t(2265),n=t(1994),l=t(3335);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,l.m6)((0,n.W)(r))}let i=s.forwardRef((e,r)=>{let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:o("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n})});i.displayName="Input";var d=t(7053),c=t(535);let u=(0,c.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=s.forwardRef((e,r)=>{let{className:t,variant:s,size:n,asChild:l=!1,...i}=e,c=l?d.g7:"button";return(0,a.jsx)(c,{className:o(u({variant:s,size:n,className:t})),ref:r,...i})});m.displayName="Button";var f=t(9501),h=t(6394);let b=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(h.f,{ref:r,className:o(b(),t),...s})});p.displayName=h.f.displayName;let x=f.RV,g=s.createContext({}),v=e=>{let{...r}=e;return(0,a.jsx)(g.Provider,{value:{name:r.name},children:(0,a.jsx)(f.Qr,{...r})})},N=()=>{let e=s.useContext(g),r=s.useContext(j),{getFieldState:t,formState:a}=(0,f.Gc)(),n=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=r;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},j=s.createContext({}),y=s.forwardRef((e,r)=>{let{className:t,...n}=e,l=s.useId();return(0,a.jsx)(j.Provider,{value:{id:l},children:(0,a.jsx)("div",{ref:r,className:o("space-y-2",t),...n})})});y.displayName="FormItem";let w=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:n,formItemId:l}=N();return(0,a.jsx)(p,{ref:r,className:o(n&&"text-destructive",t),htmlFor:l,...s})});w.displayName="FormLabel";let k=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:n,formDescriptionId:l,formMessageId:o}=N();return(0,a.jsx)(d.g7,{ref:r,id:n,"aria-describedby":s?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!s,...t})});k.displayName="FormControl",s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:n}=N();return(0,a.jsx)("p",{ref:r,id:n,className:o("text-[0.8rem] text-muted-foreground",t),...s})}).displayName="FormDescription";let C=s.forwardRef((e,r)=>{let{className:t,children:s,...n}=e,{error:l,formMessageId:i}=N(),d=l?String(null==l?void 0:l.message):s;return d?(0,a.jsx)("p",{ref:r,id:i,className:o("text-[0.8rem] font-medium text-destructive",t),...n,children:d}):null});C.displayName="FormMessage";var I=t(4041),S=t(3289);let R=I.fC,_=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(I.ck,{ref:r,className:o("border-b",t),...s})});_.displayName="AccordionItem";let P=s.forwardRef((e,r)=>{let{className:t,children:s,...n}=e;return(0,a.jsx)(I.h4,{className:"flex",children:(0,a.jsxs)(I.xz,{ref:r,className:o("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",t),...n,children:[s,(0,a.jsx)(S.Z,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});P.displayName=I.xz.displayName;let z=s.forwardRef((e,r)=>{let{className:t,children:s,...n}=e;return(0,a.jsx)(I.VY,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,a.jsx)("div",{className:o("pb-4 pt-0",t),children:s})})});z.displayName=I.VY.displayName;var E=t(3590),F=t(1229),A=t(5756);let V=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(A.fC,{className:o("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:(0,a.jsx)(A.bU,{className:o("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});V.displayName=A.fC.displayName;var D=t(4986);let O=F.z.string().regex(/^(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\/([0-9]|[12][0-9]|3[0-2])$/,"Invalid IP format (must be CIDR e.g., 192.168.1.1/24)"),G=F.z.string().regex(/^(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])$/,"Invalid IP format (e.g., 192.168.1.1)");function H(e){var r,t,n;let{initialValues:l,onChange:o}=e,[d,c]=(0,s.useState)(l),[u,f]=(0,s.useState)([]),[h,b]=(0,s.useState)([]),[p,x]=(0,s.useState)(null),[g,v]=(0,s.useState)(null),[N,j]=(0,s.useState)(null);(0,s.useEffect)(()=>{c(l)},[l]);let y=(e,r)=>{let t={...d,[e]:r};c(t),o(t)},w=(e,r,t)=>{switch(e){case"iface":try{O.parse(r),f(e=>{let r=[...e];return r[t]=!1,r})}catch(e){e instanceof F.jm&&f(e=>{let r=[...e];return r[t]=!0,r})}break;case"neighbor":try{G.parse(r),b(e=>{let r=[...e];return r[t]=!1,r})}catch(e){e instanceof F.jm&&b(e=>{let r=[...e];return r[t]=!0,r})}break;case"subnet":try{O.parse(r),x(!1)}catch(e){e instanceof F.jm&&x(!0)}break;case"dhcpStart":try{G.parse(r),v(!1)}catch(e){e instanceof F.jm&&v(!0)}break;case"dhcpEnd":try{G.parse(r),j(!1)}catch(e){e instanceof F.jm&&j(!0)}}},k=e=>{y("interfaces",d.interfaces.filter((r,t)=>t!==e))},C=e=>{y("neighbors",d.neighbors.filter((r,t)=>t!==e))};return(0,a.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Router Name"}),(0,a.jsx)(i,{type:"text",value:d.routerName,onChange:e=>y("routerName",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"AS Number"}),(0,a.jsx)(i,{type:"number",min:1,max:65534,value:d.asNumber,onChange:e=>y("asNumber",Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Interfaces"}),d.interfaces.map((e,r)=>(0,a.jsxs)("div",{className:"flex space-x-2 my-2",children:[(0,a.jsx)(i,{placeholder:"Name",value:e.name,onChange:t=>{let a=[...d.interfaces];a[r]={...e,name:t.target.value},y("interfaces",a)}}),(0,a.jsx)(i,{className:"border ".concat(void 0!==u[r]?u[r]?"border-red-500":"border-green-500":""),placeholder:"IP Address (eg. 192.168.10.1/24)",value:e.ip,onChange:t=>{let a=[...d.interfaces];a[r]={...e,ip:t.target.value},y("interfaces",a),w("iface",t.target.value,r)}}),(0,a.jsx)(i,{placeholder:"Peer",value:e.peer,onChange:t=>{let a=[...d.interfaces];a[r]={...e,peer:t.target.value},y("interfaces",a)}}),(0,a.jsx)("button",{onClick:()=>k(r),className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(D.Z,{size:20})})]},r)),(0,a.jsx)(m,{className:"mt-2",onClick:()=>y("interfaces",[...d.interfaces,{name:"",ip:"",peer:""}]),children:"Add Interface"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"BGP Neighbors"}),d.neighbors.map((e,r)=>(0,a.jsxs)("div",{className:"flex space-x-2 my-2",children:[(0,a.jsx)(i,{className:"border ".concat(void 0!==h[r]?h[r]?"border-red-500":"border-green-500":""),placeholder:"Neighbor IP (eg. 192.168.10.2)",value:e.ip,onChange:t=>{let a=[...d.neighbors];a[r]={...e,ip:t.target.value},y("neighbors",a),w("neighbor",t.target.value,r)}}),(0,a.jsx)(i,{placeholder:"AS Number",type:"number",min:1,max:65534,value:e.asNumber,onChange:t=>{let a=[...d.neighbors];a[r]={...e,asNumber:Number(t.target.value)},y("neighbors",a)}}),(0,a.jsx)("button",{onClick:()=>C(r),className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(D.Z,{size:20})})]},r)),(0,a.jsx)(m,{className:"mt-2",onClick:()=>y("neighbors",[...d.neighbors,{ip:"",asNumber:0}]),children:"Add Neighbor"})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Enable DHCP"}),(0,a.jsx)(V,{checked:null!==(n=null===(r=d.dhcp)||void 0===r?void 0:r.enabled)&&void 0!==n&&n,onCheckedChange:e=>y("dhcp",e?{enabled:!0,subnet:"",range:["",""]}:void 0)})]}),(null===(t=d.dhcp)||void 0===t?void 0:t.enabled)&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Subnet"}),(0,a.jsx)(i,{className:"border ".concat(null!==p?p?"border-red-500":"border-green-500":""),placeholder:"192.168.100.0/24",value:d.dhcp.subnet,onChange:e=>{y("dhcp",{...d.dhcp,subnet:e.target.value}),w("subnet",e.target.value,0)}}),(0,a.jsx)("label",{className:"block text-sm font-medium",children:"DHCP Range"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(i,{className:"border ".concat(null!==g?g?"border-red-500":"border-green-500":""),placeholder:"Start IP (eg. 192.168.10.1)",value:d.dhcp.range[0],onChange:e=>{y("dhcp",{...d.dhcp,range:[e.target.value,d.dhcp.range[1]]}),w("dhcpStart",e.target.value,0)}}),(0,a.jsx)(i,{className:"border ".concat(null!==N?N?"border-red-500":"border-green-500":""),placeholder:"End IP (eg. 192.168.10.99)",value:d.dhcp.range[1],onChange:e=>{y("dhcp",{...d.dhcp,range:[d.dhcp.range[0],e.target.value]}),w("dhcpEnd",e.target.value,0)}})]})]})]})]})}let T=F.z.object({number_of_routers:F.z.preprocess(e=>parseInt(F.z.string().parse(e),10),F.z.number().gte(1).lte(10))});function Z(){let[e,r]=(0,s.useState)([]),[t,n]=(0,s.useState)(void 0),l=(t,a)=>{let s=[...e];s[t]=a,r(s)},o=(0,f.cI)({resolver:(0,E.F)(T)}),d=async e=>{let r={routers:e.map(e=>({name:e.routerName,asn:e.asNumber,interfaces:e.interfaces.map(e=>({name:e.name,ip:e.ip,peer:e.peer})),neighbors:e.neighbors.map(e=>({ip:e.ip,asn:e.asNumber})),...e.dhcp&&{dhcp:e.dhcp}}))};try{let e=await fetch("http://192.168.1.16:5000/configure",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)throw Error("Error on request: ".concat(e.statusText));let t=await e.json();console.log("Configuration generated:",t)}catch(e){console.error("Error during configuration:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{...o,children:(0,a.jsxs)("form",{onSubmit:o.handleSubmit(function(e){r(Array(e.number_of_routers).fill({routerName:"",interfaces:[],neighbors:[]}))}),className:"space-y-8 w-fit mx-auto flex space-x-2",children:[(0,a.jsx)(v,{control:o.control,name:"number_of_routers",render:e=>{let{field:r}=e;return(0,a.jsxs)(y,{children:[(0,a.jsx)(w,{children:"How many routers?"}),(0,a.jsx)(k,{children:(0,a.jsx)(i,{type:"number",min:1,max:10,className:"w-full",...r})}),(0,a.jsx)(C,{})]})}}),(0,a.jsx)(m,{type:"submit",children:"Submit"})]})}),(0,a.jsxs)("div",{className:"space-y-4 max-w-5xl mx-auto",children:[(0,a.jsx)(R,{type:"single",collapsible:!0,value:t,onValueChange:n,children:e.map((e,r)=>(0,a.jsxs)(_,{value:"item-".concat(r+1),children:[(0,a.jsxs)(P,{children:["Router ",r+1]}),(0,a.jsx)(z,{children:(0,a.jsx)(H,{initialValues:e,onChange:e=>l(r,e)})})]},r))}),e.length>0&&e.every(e=>e.routerName&&e.asNumber&&e.interfaces.length>0&&e.neighbors.length>0&&e.interfaces.every(e=>e.name&&e.ip&&e.peer)&&e.neighbors.every(e=>e.ip&&e.asNumber))&&(0,a.jsx)(m,{className:"w-fit mt-4",onClick:()=>d(e),children:"Generate Configuration"})]})]})}}},function(e){e.O(0,[546,971,117,744],function(){return e(e.s=1255)}),_N_E=e.O()}]);