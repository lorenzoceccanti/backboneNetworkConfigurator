(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5612:function(e,r,t){Promise.resolve().then(t.bind(t,3633))},3633:function(e,r,t){"use strict";t.d(r,{default:function(){return eb}});var n=t(7437),s=t(2265),a=t(9501),l=t(3590);let o={number_of_routers:0,number_of_hosts:0,server_ip:"127.0.0.1",project_name:"test01"},i={name:"r1",asn:55001,interfaces:[{name:"Loopback0",ip:"1.1.1.1/32",peer:{name:"",interface:""}},{name:"Ethernet1",ip:"192.168.100.1/24",peer:{name:"h1",interface:"Ethernet1"}}],neighbors:[{ip:"192.168.200.1",asn:55002}],dhcp:{enabled:!0,subnet:"192.168.100.0/24",interface:"Ethernet1",range:["192.168.100.10","192.168.100.99"]},internet_iface:void 0},d={name:"h1",interfaces:[{name:"Ethernet1",dhcp:!0}],gateway:""};async function c(e,r){let t=await fetch("http://".concat(r,":5000/configure"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText);return t.json()}async function m(e){let r=await fetch("http://".concat(e,":5000/deploy"),{method:"POST"});if(!r.ok)throw Error(r.statusText)}async function u(e,r){let t=await fetch("http://".concat(r,":5000/transit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText)}async function f(e,r){let t=await fetch("http://".concat(r,":5000/peering"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText)}async function h(e,r){let t=await fetch("http://".concat(r,":5000/local-preference"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText)}var p=t(1229);let x=p.z.string().regex(/^(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\/([0-9]|[12][0-9]|3[0-2])$/,"Invalid IP format (must be CIDR e.g., 192.168.1.1/24)"),g=p.z.string().regex(/^(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])$/,"Invalid IP format (e.g., 192.168.1.1)"),b=p.z.object({number_of_routers:p.z.preprocess(e=>parseInt(p.z.string().parse(e),10),p.z.number().gte(1).lte(10)),number_of_hosts:p.z.preprocess(e=>parseInt(p.z.string().parse(e),10),p.z.number().gte(1).lte(10)),server_ip:p.z.string().nonempty("Server IP is required").ip("Invalid IP address"),project_name:p.z.string().nonempty("Project name is required")}),v=p.z.object({name:p.z.string().nonempty("Router name is required"),asn:p.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),interfaces:p.z.array(p.z.object({name:p.z.string().nonempty("Interface name is required"),ip:x,peer:p.z.object({name:p.z.string().nonempty("Peer name is required"),interface:p.z.string().nonempty("Peer interface is required")})})),neighbors:p.z.array(p.z.object({ip:g,asn:p.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534")})),dhcp:p.z.object({subnet:x,interface:p.z.string().nonempty("Interface name is required"),range:p.z.tuple([g,g])}).optional(),internet_iface:p.z.object({name:p.z.string().nonempty("Interface name is required"),ip:x}).optional()}),j=p.z.object({name:p.z.string().nonempty("Host name is required"),interfaces:p.z.array(p.z.object({name:p.z.string().nonempty("Interface name is required"),ip:x.optional(),dhcp:p.z.boolean()})),gateway:g.optional()}),N=p.z.object({from:p.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),through:p.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),to:p.z.array(p.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"))}),S=p.z.object({fromAS:p.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),toAS:p.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534")}),y=p.z.object({asn:p.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),neighbor_router:p.z.string().nonempty("Interface name is required"),local_preference:p.z.number().min(0,"Local Preference must be at least 0")});var w=t(5153),_=t(4508);let A=s.forwardRef((e,r)=>{let{className:t,type:s,...a}=e;return(0,n.jsx)("input",{type:s,className:(0,_.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...a})});A.displayName="Input";var C=t(7053),k=t(535);let I=(0,k.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),T=s.forwardRef((e,r)=>{let{className:t,variant:s,size:a,asChild:l=!1,...o}=e,i=l?C.g7:"button";return(0,n.jsx)(i,{className:(0,_.cn)(I({variant:s,size:a,className:t})),ref:r,...o})});T.displayName="Button";var z=t(721);let P=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(z.fC,{className:(0,_.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:(0,n.jsx)(z.bU,{className:(0,_.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});P.displayName=z.fC.displayName;var E=t(5263),V=t(3289),O=t(7969),R=t(9559);let F=E.fC,D=E.ZA,q=E.B4,Z=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e;return(0,n.jsxs)(E.xz,{ref:r,className:(0,_.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,(0,n.jsx)(E.JO,{asChild:!0,children:(0,n.jsx)(V.Z,{className:"h-4 w-4 opacity-50"})})]})});Z.displayName=E.xz.displayName;let L=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(E.u_,{ref:r,className:(0,_.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(O.Z,{className:"h-4 w-4"})})});L.displayName=E.u_.displayName;let B=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(E.$G,{ref:r,className:(0,_.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(V.Z,{className:"h-4 w-4"})})});B.displayName=E.$G.displayName;let M=s.forwardRef((e,r)=>{let{className:t,children:s,position:a="popper",...l}=e;return(0,n.jsx)(E.h_,{children:(0,n.jsxs)(E.VY,{ref:r,className:(0,_.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...l,children:[(0,n.jsx)(L,{}),(0,n.jsx)(E.l_,{className:(0,_.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(B,{})]})})});M.displayName=E.VY.displayName;let H=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(E.__,{ref:r,className:(0,_.cn)("px-2 py-1.5 text-sm font-semibold",t),...s})});H.displayName=E.__.displayName;let U=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e;return(0,n.jsxs)(E.ck,{ref:r,className:(0,_.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[(0,n.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(E.wU,{children:(0,n.jsx)(R.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(E.eT,{children:s})]})});U.displayName=E.ck.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(E.Z0,{ref:r,className:(0,_.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=E.Z0.displayName;var G=t(4986);function J(e){var r,t,o,i,d,c,m,u,f,h,p,x,g,b,j,N,S;let{initialValues:y,onChange:w}=e,{config:_,handleChange:C,handlePeerInterfaceSelect:k,handleInterfaceSelect:I,availableInterfacesOptions:z,removeInterface:E,removeInternetInterface:V,removeNeighbor:O,availableDhcpOptions:R,availableInternetOptions:L,handleInternetInterfaceSelect:B,form:J}=function(e,r){let[t,n]=(0,s.useState)(e),[o,i]=(0,s.useState)([]),[d,c]=(0,s.useState)(""),m=["Ethernet1","Ethernet2","Ethernet3","Ethernet4"],u=(0,a.cI)({resolver:(0,l.F)(v),mode:"onBlur",defaultValues:e});(0,s.useEffect)(()=>{n(e),i(e.interfaces.map(e=>"Loopback0"!==e.name?e.name:""))},[e]);let f=(e,s)=>{let a={...t,[e]:s};n(a),r(a)};return{config:t,handlePeerInterfaceSelect:(e,r)=>{let n=[...t.interfaces];n[e]={...n[e],peer:{...n[e].peer,interface:r}},f("interfaces",n)},handleChange:f,handleInterfaceSelect:(e,r)=>{let n=[...t.interfaces];n[e]={...n[e],name:r},f("interfaces",n),i(t=>{let n=[...t];return n[e]=r,n})},availableInterfacesOptions:e=>m.filter(r=>(!o.includes(r)||o[e]===r)&&!(null==d?void 0:d.includes(r))),removeInterface:e=>{f("interfaces",t.interfaces.filter((r,t)=>t!==e)),i(r=>r.filter((r,t)=>t!==e))},removeInternetInterface:()=>{f("internet_iface",{...t.internet_iface,name:""}),c(void 0)},removeNeighbor:e=>{f("neighbors",t.neighbors.filter((r,t)=>t!==e))},availableDhcpOptions:()=>o.filter(e=>""!==e),availableInternetOptions:()=>m.filter(e=>!o.includes(e)),handleInternetInterfaceSelect:e=>{f("internet_iface",{...t.internet_iface,name:e}),c(e)},form:u}}(y,w);return(0,n.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Router Name"}),(0,n.jsx)(A,{...J.register("name"),type:"text",value:_.name,className:"border ".concat(J.formState.errors.name?"border-red-500":"border-green-500"),onChange:e=>C("name",e.target.value)}),J.formState.errors.name&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.name.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"AS Number"}),(0,n.jsx)(A,{...J.register("asn",{valueAsNumber:!0}),type:"number",value:_.asn,className:"border ".concat(J.formState.errors.asn?"border-red-500":"border-green-500"),onChange:e=>C("asn",Number(e.target.value))}),J.formState.errors.asn&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.asn.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Interfaces"}),_.interfaces.map((e,r)=>{var t,s,a,l,o,i,d,c,m,u,f,h,p,x,g,b;return(0,n.jsxs)("div",{className:"md:flex md:space-x-2 my-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[0==r&&(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(A,{...J.register("interfaces.".concat(r,".name")),placeholder:"Interface Name",value:e.name,disabled:!0})}),0!=r&&(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)(F,{value:e.name,onValueChange:e=>{J.setValue("interfaces.".concat(r,".name"),e,{shouldValidate:!0}),I(r,e)},children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select an Interface"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"Interfaces"}),z(r).map(e=>(0,n.jsx)(U,{value:e,children:e},e))]})})]})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(A,{...J.register("interfaces.".concat(r,".ip")),className:"border ".concat(e.ip?(null===(s=J.formState.errors.interfaces)||void 0===s?void 0:null===(t=s[r])||void 0===t?void 0:t.ip)?"border-red-500":"border-green-500":""),placeholder:"IP Address (eg. 192.168.10.1/24)",value:e.ip,onChange:t=>{let n=[..._.interfaces];n[r]={...e,ip:t.target.value},C("interfaces",n)}}),(null===(l=J.formState.errors.interfaces)||void 0===l?void 0:null===(a=l[r])||void 0===a?void 0:a.ip)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.interfaces[r].ip.message})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(A,{placeholder:"Peer Name",...J.register("interfaces.".concat(r,".peer.name")),disabled:0===r,value:e.peer.name,className:"border ".concat(e.peer.name?(null===(d=J.formState.errors.interfaces)||void 0===d?void 0:null===(i=d[r])||void 0===i?void 0:null===(o=i.peer)||void 0===o?void 0:o.name)?"border-red-500":"border-green-500":""),onChange:t=>{let n=[..._.interfaces];n[r]={...e,peer:{...e.peer,name:t.target.value}},C("interfaces",n)}}),(null===(u=J.formState.errors.interfaces)||void 0===u?void 0:null===(m=u[r])||void 0===m?void 0:null===(c=m.peer)||void 0===c?void 0:c.name)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.interfaces[r].peer.name.message})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(A,{placeholder:"Peer Interface",...J.register("interfaces.".concat(r,".peer.interface")),disabled:0===r,value:e.peer.interface,className:"border ".concat(e.peer.interface?(null===(p=J.formState.errors.interfaces)||void 0===p?void 0:null===(h=p[r])||void 0===h?void 0:null===(f=h.peer)||void 0===f?void 0:f.interface)?"border-red-500":"border-green-500":""),onChange:t=>{[..._.interfaces][r]={...e,peer:{...e.peer,interface:t.target.value}},k(r,t.target.value)}}),(null===(b=J.formState.errors.interfaces)||void 0===b?void 0:null===(g=b[r])||void 0===g?void 0:null===(x=g.peer)||void 0===x?void 0:x.interface)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.interfaces[r].peer.interface.message})]}),(0,n.jsxs)("button",{disabled:0===r,onClick:()=>E(r),className:"text-red-500 hover:text-red-700 md:border-none md:bg-transparent md:p-0 border border-red-500 rounded-md px-2 py-1 flex items-center md:hidden",children:[(0,n.jsx)("span",{className:"mr-1",children:"Delete Interface"}),(0,n.jsx)(G.Z,{size:20})]}),(0,n.jsx)("button",{disabled:0===r,onClick:()=>E(r),className:"text-red-500 hover:text-red-700 hidden sm:block",children:(0,n.jsx)(G.Z,{size:20})})]},r)}),(0,n.jsx)(T,{className:"md:mt-2 mb-5 md:mb-0",onClick:()=>C("interfaces",[..._.interfaces,{name:"",ip:"",peer:{name:"",interface:""}}]),children:"Add Interface"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"BGP Neighbors"}),_.neighbors.map((e,r)=>{var t,s,a,l,o,i,d,c;return(0,n.jsxs)("div",{className:"md:flex md:space-x-2 my-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(A,{...J.register("neighbors.".concat(r,".ip")),className:"border ".concat(e.ip?(null===(s=J.formState.errors.neighbors)||void 0===s?void 0:null===(t=s[r])||void 0===t?void 0:t.ip)?"border-red-500":"border-green-500":""),placeholder:"Neighbor IP (eg. 192.168.10.2)",value:e.ip,onChange:t=>{let n=[..._.neighbors];n[r]={...e,ip:t.target.value},C("neighbors",n)}}),(null===(l=J.formState.errors.neighbors)||void 0===l?void 0:null===(a=l[r])||void 0===a?void 0:a.ip)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.neighbors[r].ip.message})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(A,{placeholder:"AS Number",...J.register("neighbors.".concat(r,".asn"),{valueAsNumber:!0}),type:"number",min:1,max:65534,className:"border ".concat(e.asn?(null===(i=J.formState.errors.neighbors)||void 0===i?void 0:null===(o=i[r])||void 0===o?void 0:o.asn)?"border-red-500":"border-green-500":""),value:e.asn,onChange:t=>{let n=[..._.neighbors];n[r]={...e,asn:Number(t.target.value)},C("neighbors",n)}}),(null===(c=J.formState.errors.neighbors)||void 0===c?void 0:null===(d=c[r])||void 0===d?void 0:d.asn)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.neighbors[r].asn.message})]}),(0,n.jsxs)("button",{disabled:0===r,onClick:()=>O(r),className:"text-red-500 hover:text-red-700 md:border-none md:bg-transparent md:p-0 border border-red-500 rounded-md px-2 py-1 flex items-center md:hidden",children:[(0,n.jsx)("span",{className:"mr-1",children:"Delete Neighbor"}),(0,n.jsx)(G.Z,{size:20})]}),(0,n.jsx)("button",{disabled:0===r,onClick:()=>O(r),className:"text-red-500 hover:text-red-700 hidden sm:block",children:(0,n.jsx)(G.Z,{size:20})})]},r)}),(0,n.jsx)(T,{className:"md:mt-2 mb-5 md:mb-0",onClick:()=>C("neighbors",[..._.neighbors,{ip:"",asn:0}]),children:"Add Neighbor"})]}),(0,n.jsxs)("div",{className:"border-t pt-4",children:[(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Enable DHCP"}),(0,n.jsx)(P,{checked:null!==(N=null===(r=_.dhcp)||void 0===r?void 0:r.enabled)&&void 0!==N&&N,onCheckedChange:e=>C("dhcp",e?{enabled:!0,subnet:"",interface:"",range:["",""]}:void 0)})]}),(null===(t=_.dhcp)||void 0===t?void 0:t.enabled)&&(0,n.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Subnet"}),(0,n.jsx)(A,{...J.register("dhcp.subnet"),className:"border ".concat((null===(o=J.formState.errors.dhcp)||void 0===o?void 0:o.subnet)?"border-red-500":"border-green-500"),placeholder:"192.168.100.0/24",value:_.dhcp.subnet,onChange:e=>{C("dhcp",{..._.dhcp,subnet:e.target.value})}}),(null===(i=J.formState.errors.dhcp)||void 0===i?void 0:i.subnet)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.dhcp.subnet.message}),(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Interface Name"}),(0,n.jsxs)(F,{value:_.dhcp.interface,onValueChange:e=>{J.setValue("dhcp.interface",e,{shouldValidate:!0}),C("dhcp",{..._.dhcp,interface:e})},children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select an Interface"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"Interfaces"}),R().map(e=>(0,n.jsx)(U,{value:e,children:e},e))]})})]}),(0,n.jsx)("label",{className:"block text-sm font-medium",children:"DHCP Range"}),(0,n.jsxs)("div",{className:"md:flex md:space-x-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[(0,n.jsx)(A,{...J.register("dhcp.range.0"),className:"border ".concat((null===(c=J.formState.errors.dhcp)||void 0===c?void 0:null===(d=c.range)||void 0===d?void 0:d[0])?"border-red-500":"border-green-500"),placeholder:"Start IP (eg. 192.168.10.1)",value:_.dhcp.range[0],onChange:e=>{C("dhcp",{..._.dhcp,range:[e.target.value,_.dhcp.range[1]]})}}),(null===(m=J.formState.errors.dhcp)||void 0===m?void 0:m.range)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.dhcp.range.message}),(0,n.jsx)(A,{...J.register("dhcp.range.1"),className:"border ".concat((null===(f=J.formState.errors.dhcp)||void 0===f?void 0:null===(u=f.range)||void 0===u?void 0:u[1])?"border-red-500":"border-green-500"),placeholder:"End IP (eg. 192.168.10.99)",value:_.dhcp.range[1],onChange:e=>{C("dhcp",{..._.dhcp,range:[_.dhcp.range[0],e.target.value]})}}),(null===(h=J.formState.errors.dhcp)||void 0===h?void 0:h.range)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.dhcp.range.message})]})]})]}),(0,n.jsxs)("div",{className:"border-t pt-4",children:[(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Enable Internet"}),(0,n.jsx)(P,{checked:null!==(S=null===(p=_.internet_iface)||void 0===p?void 0:p.enabled)&&void 0!==S&&S,onCheckedChange:e=>{e||V(),C("internet_iface",e?{enabled:!0,name:"",ip:""}:void 0)}})]}),(null===(x=_.internet_iface)||void 0===x?void 0:x.enabled)&&(0,n.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Internet Interface"}),(0,n.jsxs)("div",{className:"md:flex md:space-x-2 my-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)(F,{value:_.internet_iface.name,onValueChange:e=>{J.setValue("internet_iface.name",e,{shouldValidate:!0}),B(e)},children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select interface"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"Interfaces"}),L().map(e=>(0,n.jsx)(U,{value:e,children:e},e))]})})]})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(A,{...J.register("internet_iface.ip"),className:"border ".concat((null===(g=_.internet_iface)||void 0===g?void 0:g.ip)?(null===(b=J.formState.errors.internet_iface)||void 0===b?void 0:b.ip)?"border-red-500":"border-green-500":""),placeholder:"IP Address (eg. 192.168.10.1/24)",value:_.internet_iface.ip,onChange:e=>{C("internet_iface",{..._.internet_iface,ip:e.target.value})}}),(null===(j=J.formState.errors.internet_iface)||void 0===j?void 0:j.ip)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:J.formState.errors.internet_iface.ip.message})]})]})]})]})]})}function Y(e){let{initialValues:r,onChange:t}=e,{config:o,handleChange:i,handleInterfaceSelection:d,getAvailableInterfaces:c,removeInterface:m,form:u}=function(e,r){let[t,n]=(0,s.useState)(e),[o,i]=(0,s.useState)([]),d=["Ethernet1","Ethernet2","Ethernet3","Ethernet4"],c=(0,a.cI)({resolver:(0,l.F)(j),mode:"onBlur",defaultValues:e});(0,s.useEffect)(()=>{n(e),i(e.interfaces.map(e=>e.name))},[e]);let m=(e,s)=>{let a={...t,[e]:s};n(a),r(a)};return{config:t,handleChange:m,handleInterfaceSelection:(e,r)=>{let n=[...t.interfaces];n[e]={...n[e],name:r},m("interfaces",n),i(t=>{let n=[...t];return n[e]=r,n})},getAvailableInterfaces:e=>d.filter(r=>!o.includes(r)||o[e]===r),removeInterface:e=>{m("interfaces",t.interfaces.filter((r,t)=>t!==e)),i(r=>r.filter((r,t)=>t!==e))},form:c}}(r,t);return(0,n.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Host Name"}),(0,n.jsx)(A,{...u.register("name"),type:"text",value:o.name,className:"border ".concat(u.formState.errors.name?"border-red-500":"border-green-500"),onChange:e=>i("name",e.target.value)}),u.formState.errors.name&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.name.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Interfaces"}),o.interfaces.map((e,r)=>{var t,s,a,l,f,h;return(0,n.jsxs)("div",{className:"md:flex md:space-x-2 my-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[(0,n.jsxs)(F,{...u.register("interfaces.".concat(r,".name")),value:o.interfaces[r].name,onValueChange:e=>d(r,e),children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select an Interface"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"Interfaces"}),c(r).map(e=>(0,n.jsx)(U,{value:e,children:e},e))]})})]}),(null===(s=u.formState.errors.interfaces)||void 0===s?void 0:null===(t=s[r])||void 0===t?void 0:t.name)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.interfaces[r].name.message}),!o.interfaces[r].dhcp&&(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(A,{...u.register("interfaces.".concat(r,".ip")),className:"border ".concat(e.ip?(null===(l=u.formState.errors.interfaces)||void 0===l?void 0:null===(a=l[r])||void 0===a?void 0:a.ip)?"border-red-500":"border-green-500":""),placeholder:"IP Address (eg. 192.168.10.1/24)",value:e.ip,onChange:t=>{let n=[...o.interfaces];n[r]={...e,ip:t.target.value},i("interfaces",n)}}),(null===(h=u.formState.errors.interfaces)||void 0===h?void 0:null===(f=h[r])||void 0===f?void 0:f.ip)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.interfaces[r].ip.message})]}),(0,n.jsxs)("div",{className:"flex space-x-4 my-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-nowrap my-auto",children:"Enable DHCP"}),(0,n.jsx)(P,{className:"my-auto",checked:o.interfaces[r].dhcp,onCheckedChange:t=>i("interfaces",[...o.interfaces.slice(0,r),{...e,dhcp:t},...o.interfaces.slice(r+1)])})]}),(0,n.jsxs)("button",{disabled:0===r,onClick:()=>m(r),className:"text-red-500 hover:text-red-700 md:border-none md:bg-transparent md:p-0 border border-red-500 rounded-md px-2 py-1 flex items-center md:hidden",children:[(0,n.jsx)("span",{className:"mr-1",children:"Delete Interface"}),(0,n.jsx)(G.Z,{size:20})]}),(0,n.jsx)("button",{disabled:0===r,onClick:()=>m(r),className:"text-red-500 hover:text-red-700 hidden sm:block",children:(0,n.jsx)(G.Z,{size:20})})]},r)}),(0,n.jsx)(T,{className:"md:mt-2 mb-5 md:mb-0",onClick:()=>i("interfaces",[...o.interfaces,{name:"",ip:"",dhcp:!1}]),children:"Add Interface"})]}),!o.interfaces.some(e=>e.dhcp)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Gateway"}),(0,n.jsx)(A,{...u.register("gateway"),type:"text",placeholder:"IP Address (eg. 192.168.1.1)",value:o.gateway,className:"border ".concat(o.gateway?u.formState.errors.gateway?"border-red-500":"border-green-500":""),onChange:e=>{i("gateway",e.target.value)}}),u.formState.errors.gateway&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.gateway.message})]})]})}function W(e){var r,t;let{initialValues:o,availableASOptions:i,onChange:d}=e,{config:c,form:m,handleChange:u,handleToChange:f,addToField:h,getAvailableASOptions:p,removeToAS:x}=function(e,r,t){let[n,o]=(0,s.useState)(e),i=(0,a.cI)({resolver:(0,l.F)(N),mode:"onBlur",defaultValues:e});(0,s.useEffect)(()=>{o(e)},[e]);let d=(e,r)=>{let s={...n,[e]:r};o(s),t(s)},c=(e,r,t,n)=>{let s=[];"from"!==t&&null!==e.from&&s.push(e.from),"through"!==t&&null!==e.through&&s.push(e.through),e.to.forEach((e,r)=>{("to"!==t||r!==n)&&s.push(e)});let a=r.filter(e=>!s.includes(e)),l=null;return null===(l="from"===t?e.from:"through"===t?e.through:e.to[n])||a.includes(l)||a.push(l),a};return{config:n,form:i,handleChange:d,handleToChange:(e,r)=>{let t=[...n.to];t[e]=r,d("to",t)},addToField:()=>{let e=c(n,r,"to")[0];if(void 0==e){console.error("No available AS numbers to add");return}d("to",[...n.to,e])},getAvailableASOptions:c,removeToAS:e=>{d("to",n.to.filter((r,t)=>t!==e))}}}(o,i,d);return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Transit Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:'Transit means that traffic from the "From" AS can reach the "To" AS via the intermediate AS "Through", which has a business relationship with both "From" and "To", allowing end-to-end connectivity.'}),(0,n.jsxs)("div",{className:"text-sm grid grid-cols-3 gap-x-10 w-fit mx-auto my-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"From AS"}),(0,n.jsxs)(F,{value:null===c.from?"":String(c.from),onValueChange:e=>u("from",Number(e)),children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select an AS",children:null!==(r=c.from)&&void 0!==r?r:"Select"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"AS Number"}),p(c,i,"from").map(e=>(0,n.jsx)(U,{value:String(e),children:e},e))]})})]}),m.formState.errors.from&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.from.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Through AS"}),(0,n.jsxs)(F,{value:null===c.through?"":String(c.through),onValueChange:e=>u("through",Number(e)),children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select an AS",children:null!==(t=c.through)&&void 0!==t?t:"Select"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"AS Number"}),p(c,i,"through").map(e=>(0,n.jsx)(U,{value:String(e),children:e},e))]})})]}),m.formState.errors.through&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.through.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"To AS"}),c.to.map((e,r)=>{var t;return(0,n.jsxs)("div",{className:"flex space-x-4 mb-2",children:[(0,n.jsxs)(F,{value:String(e),onValueChange:e=>f(r,Number(e)),children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select an AS",children:e})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"AS Number"}),p(c,i,"to",r).map(e=>(0,n.jsx)(U,{value:String(e),children:e},e))]})})]}),(null===(t=m.formState.errors.to)||void 0===t?void 0:t[r])&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.to[r].message}),(0,n.jsxs)("button",{disabled:0===r,onClick:()=>x(r),className:"text-red-500 hover:text-red-700 md:border-none md:bg-transparent md:p-0 border border-red-500 rounded-md px-2 py-1 flex items-center md:hidden",children:[(0,n.jsx)("span",{className:"mr-1",children:"Delete Interface"}),(0,n.jsx)(G.Z,{size:20})]}),(0,n.jsx)("button",{disabled:0===r,onClick:()=>x(r),className:"text-red-500 hover:text-red-700 hidden sm:block",children:(0,n.jsx)(G.Z,{size:20})})]},r)}),(0,n.jsx)(T,{onClick:h,children:"Add To AS"})]})]})]})}function $(e){var r,t;let{initialValues:o,availableASOptions:i,onChange:d}=e,{config:c,form:m,handleChange:u,getAvailableASOptions:f}=function(e,r,t){let[n,o]=(0,s.useState)(e),i=(0,a.cI)({resolver:(0,l.F)(S),mode:"onBlur",defaultValues:e});return(0,s.useEffect)(()=>{o(e)},[e]),{config:n,form:i,handleChange:(e,r)=>{let s={...n,[e]:r};o(s),t(s)},getAvailableASOptions:(e,r,t)=>{let n=[];return null!==e.fromAS&&"fromAS"!==t&&n.push(e.fromAS),null!==e.toAS&&"toAS"!==t&&n.push(e.toAS),r.filter(e=>!n.includes(e))}}}(o,0,d);return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Peering Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:'Peering allows direct traffic exchange between "From" AS and "To" AS without an intermediary.'}),(0,n.jsxs)("div",{className:"text-sm grid grid-cols-2 gap-x-10 w-fit mx-auto my-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"From AS"}),(0,n.jsxs)(F,{value:null===c.fromAS?"":String(c.fromAS),onValueChange:e=>u("fromAS",Number(e)),children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select an AS",children:null!==(r=c.fromAS)&&void 0!==r?r:"Select"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"AS Number"}),f(c,i,"fromAS").map(e=>(0,n.jsx)(U,{value:String(e),children:e},e))]})})]}),m.formState.errors.fromAS&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.fromAS.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"To AS"}),(0,n.jsxs)(F,{value:null===c.toAS?"":String(c.toAS),onValueChange:e=>u("toAS",Number(e)),children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select an AS",children:null!==(t=c.toAS)&&void 0!==t?t:"Select"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"AS Number"}),f(c,i,"toAS").map(e=>(0,n.jsx)(U,{value:String(e),children:e},e))]})})]}),m.formState.errors.toAS&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.toAS.message})]})]})]})}var Q=t(517);function X(e){let{config:r}=e,t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=new Set(r.routers.map(e=>e.name)),n=new Set;r.links.forEach(e=>{e.forEach(e=>{let[r]=e.split(":");n.add(r)})});let s=[],a={},l=1;n.forEach(r=>{let t=e.has(r);s.push({id:l,label:r,shape:"image",image:t?"/imgs/router.png":"/imgs/computer.png"}),a[r]=l,l++});let o=r.links.map(e=>{let[r,t]=e,n=r.split(":")[0],s=t.split(":")[0];return{from:a[n],to:a[s]}});if(t.current){let e=new Q.qg(s),r=new Q.qg(o);new Q.Zc(t.current,{nodes:e,edges:r},{physics:{stabilization:!0}})}},[r]),(0,n.jsxs)("div",{className:"space-y-4 max-w-5xl lg:mx-auto my-10 mx-10",children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Your Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:'This is a visualization of the network topology you have configured. If you see any issues, you can go back and modify the configuration, or you can proceed clicking the "Deploy Network" button above.'}),(0,n.jsx)("div",{className:"h-[600px] border border-gray-200 rounded-md shadow-md",ref:t})]})}let K=()=>(0,n.jsxs)("svg",{className:"animate-spin size-1.5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]});var ee=t(6394);let er=(0,k.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),et=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(ee.f,{ref:r,className:(0,_.cn)(er(),t),...s})});et.displayName=ee.f.displayName;let en=a.RV,es=s.createContext({}),ea=e=>{let{...r}=e;return(0,n.jsx)(es.Provider,{value:{name:r.name},children:(0,n.jsx)(a.Qr,{...r})})},el=()=>{let e=s.useContext(es),r=s.useContext(eo),{getFieldState:t,formState:n}=(0,a.Gc)(),l=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...l}},eo=s.createContext({}),ei=s.forwardRef((e,r)=>{let{className:t,...a}=e,l=s.useId();return(0,n.jsx)(eo.Provider,{value:{id:l},children:(0,n.jsx)("div",{ref:r,className:(0,_.cn)("space-y-2",t),...a})})});ei.displayName="FormItem";let ed=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:a,formItemId:l}=el();return(0,n.jsx)(et,{ref:r,className:(0,_.cn)(a&&"text-destructive",t),htmlFor:l,...s})});ed.displayName="FormLabel";let ec=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:a,formDescriptionId:l,formMessageId:o}=el();return(0,n.jsx)(C.g7,{ref:r,id:a,"aria-describedby":s?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!s,...t})});ec.displayName="FormControl",s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:a}=el();return(0,n.jsx)("p",{ref:r,id:a,className:(0,_.cn)("text-[0.8rem] text-muted-foreground",t),...s})}).displayName="FormDescription";let em=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e,{error:l,formMessageId:o}=el(),i=l?String(null==l?void 0:l.message):s;return i?(0,n.jsx)("p",{ref:r,id:o,className:(0,_.cn)("text-[0.8rem] font-medium text-destructive",t),...a,children:i}):null});em.displayName="FormMessage";var eu=t(3816);let ef=eu.fC,eh=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(eu.ck,{ref:r,className:(0,_.cn)("border-b",t),...s})});eh.displayName="AccordionItem";let ep=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e;return(0,n.jsx)(eu.h4,{className:"flex",children:(0,n.jsxs)(eu.xz,{ref:r,className:(0,_.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",t),...a,children:[s,(0,n.jsx)(V.Z,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});ep.displayName=eu.xz.displayName;let ex=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e;return(0,n.jsx)(eu.VY,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:(0,n.jsx)("div",{className:(0,_.cn)("pb-4 pt-0",t),children:s})})});function eg(e){var r,t;let{initialValues:o,availableASOptions:i,availableRouters:d,onChange:c}=e,{config:m,form:u,handleChange:f,getAvailableRouterOptions:h,getAvailableLPASOptions:p}=function(e,r){let[t,n]=(0,s.useState)(e),o=(0,a.cI)({resolver:(0,l.F)(y),mode:"onBlur",defaultValues:e});return(0,s.useEffect)(()=>{n(e)},[e]),{config:t,form:o,handleChange:(e,s)=>{let a={...t,[e]:s};n(a),r(a)},getAvailableRouterOptions:(e,r)=>r.filter(r=>r.asn!=e.asn),getAvailableLPASOptions:(e,r,t)=>{let n=[];return null!==e.asn&&"asn"!==t&&n.push(e.asn),r.filter(e=>!n.includes(e))}}}(o,c);return(0,n.jsxs)("div",{className:"border-t pt-4",children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Local Preference Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:"Local Preference allows to select a preferred path to send outbound traffic"}),(0,n.jsxs)("div",{className:"md:flex md:space-x-2 my-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"AS"}),(0,n.jsxs)(F,{value:null===m.asn?"":String(m.asn),onValueChange:e=>f("asn",Number(e)),children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select an AS",children:null!==(r=m.asn)&&void 0!==r?r:"Select"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"AS Number"}),p(m,i,"asn").map(e=>(0,n.jsx)(U,{value:String(e),children:e},e))]})})]}),u.formState.errors.asn&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.asn.message})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Neighbor router"}),(0,n.jsxs)(F,{value:null===m.asn?"":String(m.asn),onValueChange:e=>f("neighbor_router",e),children:[(0,n.jsx)(Z,{className:"w-full",children:(0,n.jsx)(q,{placeholder:"Select a router",children:null!==(t=m.neighbor_router)&&void 0!==t?t:"Select"})}),(0,n.jsx)(M,{children:(0,n.jsxs)(D,{children:[(0,n.jsx)(H,{children:"Router name"}),h(m,d).map(e=>(0,n.jsx)(U,{value:e.name,children:e.name},e.name))]})})]})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Local Preference"}),(0,n.jsx)(A,{...u.register("local_preference"),type:"number",placeholder:"Local Preference",value:m.local_preference,onChange:e=>{f("local_preference",Number(e.target.value))}})]})]})]})}function eb(){let[e,r]=(0,s.useState)(void 0),{form:t,onSubmit:p,routerConfigs:x,updateRouterConfig:g,hostConfigs:v,updateHostConfig:j,transitConfigs:N,peeringConfigs:S,localPreferenceConfigs:y,isConfigGenerated:_,isDeploying:C,getNetworkTopologyResponse:k,handleGenerateConfiguration:I,handleDeployNetwork:z,handleTransitConfigsChange:P,handlePeeringConfigsChange:E,handleLocalPreferenceConfigsChange:V,getAvailableASOptions:O,getAvailableRouters:R,handleTransitConfigsSend:F,handlePeeringConfigsSend:D,handleLocalPreferenceConfigsSend:q}=function(){let[e,r]=(0,s.useState)([]),[t,n]=(0,s.useState)([]),[p,x]=(0,s.useState)(),[g,v]=(0,s.useState)(),[j,N]=(0,s.useState)(),[S,y]=(0,s.useState)(null),[_,A]=(0,s.useState)(void 0),[C,k]=(0,s.useState)(!1),[I,T]=(0,s.useState)(!1),{toast:z}=(0,w.pm)(),P=(0,a.cI)({resolver:(0,l.F)(b),defaultValues:o}),E=async(e,r)=>{let t={project_name:P.getValues("project_name"),routers:e,hosts:r};if(!_){console.error("Server IP is not set.");return}try{console.log("Sending Configuration:",JSON.stringify(t,null,2)),console.log("Server IP:",_);let e=await c(t,_);y(e),z({variant:"default",title:"Configuration generated!",description:"The configuration has been generated successfully."}),k(!0)}catch(e){console.error("Error:",e),z({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e}),k(!1)}},V=(e,r)=>e.routers.filter(e=>e.asn===r),O=(e,r)=>e.routers.filter(e=>r.includes(e.asn)),R=(e,r,t)=>e.links.filter(e=>{let[n,s]=e;return r.some(e=>n.split(":")[0]===e.name||s.split(":")[0]===e.name)&&t.some(e=>n.split(":")[0]===e.name||s.split(":")[0]===e.name)}),F=(e,r)=>e.find(e=>r.some(r=>{let[t,n]=r;return t.split(":")[0]===e.name||n.split(":")[0]===e.name}))||(console.error("Router not found."),e[0]),D=(e,r,t)=>t.map(t=>e.links.find(e=>{let[n,s]=e;return r.some(e=>n.split(":")[0]===e.name&&s.split(":")[0]===t.name||n.split(":")[0]===t.name&&s.split(":")[0]===e.name)})||(console.error("Through-To link not found."),["",""])),q=(e,r)=>{let t=r.find(r=>{let[t,n]=r;return t.split(":")[0]===e.name||n.split(":")[0]===e.name});return t?t[0].split(":")[0]===e.name?t[0].split(":")[1]:t[1].split(":")[1]:null},Z=(e,r,t,n,s)=>{var a;let l=r.map(r=>{var n;if(!r)return console.error("Link not found.");let[s,a]=r,l=t.find(e=>e.name===a.split(":")[0]||e.name===s.split(":")[0]);if(!l)return console.error("To router not found.");let o=s.split(":")[0]===e.name?s.split(":")[1]:a.split(":")[1];return{asn:l.asn,my_router_ip:null===(n=e.interfaces.find(e=>e.name===o))||void 0===n?void 0:n.ip.split("/")[0]}}).filter(Boolean);return l.unshift({asn:n.asn,my_router_ip:(null===(a=e.interfaces.find(e=>e.name===s))||void 0===a?void 0:a.ip.split("/")[0])||""}),l},L=(e,r,t)=>t.map(e=>{var t,n;let s=r.find(r=>{if(!r)return!1;let[t,n]=r;return t.split(":")[0]===e.name||n.split(":")[0]===e.name});if(!s)return console.error("Link not found."),null;let[a,l]=s,o=a.split(":")[0]===e.name?a.split(":")[1]:l.split(":")[1];return{asn:e.asn,router:e.name,router_ip:null===(t=e.interfaces.find(e=>e.name===o))||void 0===t?void 0:t.ip.split("/")[0],mngt_ip:null===(n=e.mngt_ipv4)||void 0===n?void 0:n.split("/")[0]}}).filter(e=>null!==e),B=(e,r,t,n,s)=>{var a,l,o,i,d,c,m,u;let f=null!==(i=null===(a=e.interfaces.find(e=>e.name===s))||void 0===a?void 0:a.ip.split("/")[0])&&void 0!==i?i:"",h=null!==(d=null===(l=e.mngt_ipv4)||void 0===l?void 0:l.split("/")[0])&&void 0!==d?d:"",p=null!==(c=null===(o=r.mngt_ipv4)||void 0===o?void 0:o.split("/")[0])&&void 0!==c?c:"",x=t.map(e=>{var r;return{asn:e.asn,my_router_ip:null!==(r=e.my_router_ip)&&void 0!==r?r:""}}),g=n.length>0?{asn:n[0].asn,router:n[0].router,router_ip:null!==(m=n[0].router_ip)&&void 0!==m?m:"",mngt_ip:null!==(u=n[0].mngt_ip)&&void 0!==u?u:""}:{asn:0,router:"",router_ip:"",mngt_ip:""};return{from_:{asn:e.asn,router:e.name,router_ip:f,mngt_ip:h},through:{asn:r.asn,router:r.name,mngt_ip:p,router_ip:x},to:g}},M=async()=>{if(!S||!p)return;let e=V(S,p.from);if(!e.length)return console.error("From router not found.");let r=V(S,p.through);if(!r.length)return console.error("Through router not found.");let t=O(S,p.to);if(!t.length)return console.error("To routers not found.");let n=R(S,e,r);if(!n.length)return console.error("From-Through link not found.");let s=F(e,n);if(!s)return console.error("From router not found.");let a=F(r,n);if(!a)return console.error("Through router not found.");let l=D(S,r,t),o=q(s,n),i=q(a,n),d=Z(a,l,t,s,i),c=L(a,l,t),m=B(s,a,d,c,o);if(console.log(m),!_){console.error("Server IP is not set.");return}try{await u(m,_),z({variant:"default",title:"Transit configuration generated!",description:"The configuration has been generated successfully."})}catch(e){console.error("Error:",e),z({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}},H=(e,r,t,n)=>{var s,a,l,o,i,d,c,m;return{asn:e.asn,router_ip:null!==(i=null===(s=e.interfaces.find(e=>e.name===t))||void 0===s?void 0:s.ip.split("/")[0])&&void 0!==i?i:"",mngt_ip:null!==(d=null===(a=e.mngt_ipv4)||void 0===a?void 0:a.split("/")[0])&&void 0!==d?d:"",peer:{asn:r.asn,router_ip:null!==(c=null===(l=r.interfaces.find(e=>e.name===n))||void 0===l?void 0:l.ip.split("/")[0])&&void 0!==c?c:"",mngt_ip:null!==(m=null===(o=r.mngt_ipv4)||void 0===o?void 0:o.split("/")[0])&&void 0!==m?m:""}}},U=async()=>{if(!S||!g)return;let e=V(S,g.fromAS);if(!e.length)return console.error("Father peer router not found");let r=V(S,g.toAS);if(!r.length)return console.error("Son peer router not found");let t=R(S,e,r);if(!t.length)return console.error("Peering link not found");let n=F(e,t);if(!n)return console.error("Father peer router not found");let s=F(r,t);if(!s)return console.error("Son peer router not found");let a=q(n,t),l=q(s,t),o=H(n,s,a,l);if(console.log(o),!_){console.error("Server IP is not set.");return}try{await f(o,_),z({variant:"default",title:"Peering configuration generated!",description:"The configuration has been generated successfully."})}catch(e){console.error("Error:",e),z({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}},G=(e,r)=>e.routers.filter(e=>e.name===r),J=(e,r)=>e.map(e=>{let t=e.neighbors.find(e=>r.some(r=>r.interfaces.some(r=>r.ip.split("/")[0]===e.ip)));if(t)return{router:e,matchedIp:t.ip}}).find(e=>void 0!==e),Y=(e,r,t)=>{var n,s;return{asn:e.asn,neighbor_ip:r,mngt_ip:null!==(s=null===(n=e.mngt_ipv4)||void 0===n?void 0:n.split("/")[0])&&void 0!==s?s:"",local_preference:t}},W=async()=>{if(!S||!j)return;let e=V(S,j.asn);if(!e.length)return console.error("routers not found");let r=G(S,j.neighbor_router);if(r.length>1||!r)return console.error("routers not found");let t=J(e,r);if(!t)return console.error("router not found");let n=Y(t.router,t.matchedIp,j.local_preference);if(console.log(n),!_){console.error("Server IP is not set.");return}try{await h(n,_),z({variant:"default",title:"Local Preference configuration generated!",description:"The configuration has been generated successfully."})}catch(e){console.error("Error:",e),z({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}};return{form:P,onSubmit:function(e){A(e.server_ip),r(Array(e.number_of_routers).fill({...i})),n(Array(e.number_of_hosts).fill({...d}))},routerConfigs:e,updateRouterConfig:(e,t)=>{r(r=>{let n=[...r];return n[e]=t,n})},hostConfigs:t,updateHostConfig:(e,r)=>{n(t=>{let n=[...t];return n[e]=r,n})},transitConfigs:p,peeringConfigs:g,localPreferenceConfigs:j,isConfigGenerated:C,isDeploying:I,getNetworkTopologyResponse:()=>S,handleGenerateConfiguration:E,handleDeployNetwork:async()=>{if(T(!0),!_){console.error("Server IP is not set.");return}try{await m(_),z({variant:"default",title:"Network deployed!",description:"The network has been deployed successfully."}),x({from:0,through:0,to:[0]}),v({fromAS:0,toAS:0}),N({asn:0,neighbor_router:"",local_preference:0})}catch(e){console.error("Error:",e),z({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}finally{T(!1)}},handleTransitConfigsChange:e=>{x(e)},handlePeeringConfigsChange:e=>{v(e)},handleLocalPreferenceConfigsChange:e=>{N(e)},getAvailableASOptions:()=>S?Array.from(new Set(S.routers.map(e=>e.asn))):[],getAvailableRouters:()=>S?Array.from(new Set(S.routers)):[],handleTransitConfigsSend:M,handlePeeringConfigsSend:U,handleLocalPreferenceConfigsSend:W}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(en,{...t,children:(0,n.jsxs)("form",{onSubmit:t.handleSubmit(p),className:"space-y-5 w-fit mx-auto",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(ea,{control:t.control,name:"number_of_routers",render:e=>{let{field:r}=e;return(0,n.jsxs)(ei,{children:[(0,n.jsx)(ed,{children:"How many routers?"}),(0,n.jsx)(ec,{children:(0,n.jsx)(A,{type:"number",min:1,max:10,className:"w-full",...r})}),(0,n.jsx)(em,{})]})}}),(0,n.jsx)(ea,{control:t.control,name:"number_of_hosts",render:e=>{let{field:r}=e;return(0,n.jsxs)(ei,{children:[(0,n.jsx)(ed,{children:"How many hosts?"}),(0,n.jsx)(ec,{children:(0,n.jsx)(A,{type:"number",min:1,max:10,className:"w-full",...r})}),(0,n.jsx)(em,{})]})}}),(0,n.jsx)(ea,{control:t.control,name:"server_ip",render:e=>{let{field:r}=e;return(0,n.jsxs)(ei,{children:[(0,n.jsx)(ed,{children:"What is the server IP?"}),(0,n.jsx)(ec,{children:(0,n.jsx)(A,{type:"text",className:"w-full",...r})}),(0,n.jsx)(em,{})]})}}),(0,n.jsx)(ea,{control:t.control,name:"project_name",render:e=>{let{field:r}=e;return(0,n.jsxs)(ei,{children:[(0,n.jsx)(ed,{children:"What is the name of the project?"}),(0,n.jsx)(ec,{children:(0,n.jsx)(A,{type:"text",className:"w-full",...r})}),(0,n.jsx)(em,{})]})}})]}),(0,n.jsx)(T,{type:"submit",className:"mx-auto w-full",children:"Submit"})]})}),(0,n.jsxs)("div",{className:"space-y-4 max-w-5xl lg:mx-auto my-10 mx-10",children:[(0,n.jsxs)(ef,{type:"single",collapsible:!0,value:e,onValueChange:r,children:[x.map((e,r)=>(0,n.jsxs)(eh,{value:"item-".concat(r+1),children:[(0,n.jsxs)(ep,{children:["Router ",r+1]}),(0,n.jsx)(ex,{children:(0,n.jsx)(J,{initialValues:e,onChange:e=>g(r,e)})})]},r)),v.map((e,r)=>(0,n.jsxs)(eh,{value:"item-".concat(x.length+r+1),children:[(0,n.jsxs)(ep,{children:["Host ",r+1]}),(0,n.jsx)(ex,{children:(0,n.jsx)(Y,{initialValues:e,onChange:e=>j(r,e)})})]},r))]}),x.length>0&&v.length>0&&x.every(e=>e.name&&e.asn&&e.interfaces.length>0&&e.neighbors.length>0&&e.interfaces.every(e=>e.name&&e.ip&&e.peer)&&e.neighbors.every(e=>e.ip&&e.asn))&&v.every(e=>e.name&&e.interfaces.length>0&&e.interfaces.every(e=>e.name&&(e.dhcp||e.ip))&&(e.interfaces.some(e=>e.dhcp)||e.gateway))&&(0,n.jsxs)("div",{className:"sm:space-x-3",children:[(0,n.jsx)(T,{className:"w-fit my-4",onClick:()=>I(x,v),children:"Generate Configuration"}),(0,n.jsxs)(T,{disabled:!_,className:"w-fit my-4",onClick:()=>z(),children:["Deploy Network ",C?(0,n.jsx)(K,{}):""]})]}),_&&k()&&(0,n.jsx)(X,{config:k()}),N&&(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{initialValues:N,availableASOptions:O(),onChange:P}),(0,n.jsx)(T,{className:"w-fit",onClick:F,children:"Send Transit Configuration"})]}),S&&(0,n.jsxs)("div",{children:[(0,n.jsx)($,{initialValues:S,availableASOptions:O(),onChange:E}),(0,n.jsx)(T,{className:"w-fit",onClick:D,children:"Send Peering Configuration"})]}),y&&(0,n.jsxs)("div",{children:[(0,n.jsx)(eg,{initialValues:y,availableASOptions:O(),availableRouters:R(),onChange:V}),(0,n.jsx)("br",{}),(0,n.jsx)(T,{className:"w-fit",onClick:q,children:"Send Local Preference Configuration"})]})]})]})}ex.displayName=eu.VY.displayName},5153:function(e,r,t){"use strict";t.d(r,{pm:function(){return u}});var n=t(2265);let s=0,a=new Map,l=e=>{if(a.has(e))return;let r=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,r)},o=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},i=[],d={toasts:[]};function c(e){d=o(d,e),i.forEach(e=>{e(d)})}function m(e){let{...r}=e,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,r]=n.useState(d);return n.useEffect(()=>(i.push(r),()=>{let e=i.indexOf(r);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var n=t(1994),s=t(3335);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}}},function(e){e.O(0,[597,966,486,971,117,744],function(){return e(e.s=5612)}),_N_E=e.O()}]);