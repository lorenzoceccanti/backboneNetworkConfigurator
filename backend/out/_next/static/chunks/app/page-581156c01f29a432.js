(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5612:function(e,r,t){Promise.resolve().then(t.bind(t,4393))},4393:function(e,r,t){"use strict";t.d(r,{default:function(){return ey}});var n=t(7437),s=t(2265),a=t(9501),i=t(3590);let l={number_of_routers:0,number_of_hosts:0,server_ip:"127.0.0.1",project_name:"test01"},o={name:"R1",asn:55001,interfaces:[{name:"Loopback0",ip:"1.1.1.1/32",peer:{name:"",interface:""}},{name:"Ethernet1",ip:"192.168.100.1/24",peer:{name:"h1",interface:"Ethernet1"}}],neighbors:[{ip:"192.168.200.1",asn:55002}],dhcp:{enabled:!0,subnet:"192.168.100.0/24",interface:"Ethernet1",range:["192.168.100.10","192.168.100.99"]},internet_iface:void 0,redistribute_bgp:!1},d={name:"H1",interfaces:[{name:"Ethernet1",dhcp:!0}],gateway:""};async function c(e,r){let t=await fetch("http://".concat(r,":5000/configure"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText);return t.json()}async function u(e){let r=await fetch("http://".concat(e,":5000/deploy"),{method:"POST"});if(!r.ok)throw Error(r.statusText)}async function m(e,r){let t=await fetch("http://".concat(r,":5000/transit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText)}async function h(e,r){let t=await fetch("http://".concat(r,":5000/peering"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText)}async function f(e,r){let t=await fetch("http://".concat(r,":5000/local-preference"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText)}async function p(e,r){let t=await fetch("http://".concat(r,":5000/announce"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText)}async function x(e,r){let t=await fetch("http://".concat(r,":5000/stop-announce"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText)}var v=t(1229);let g=v.z.string().regex(/^(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\/([0-9]|[12][0-9]|3[0-2])$/,"Invalid IP format (must be CIDR e.g., 192.168.1.1/24)"),b=v.z.string().regex(/^(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])$/,"Invalid IP format (e.g., 192.168.1.1)"),j=v.z.object({number_of_routers:v.z.preprocess(e=>parseInt(v.z.string().parse(e),10),v.z.number().gte(1).lte(10)),number_of_hosts:v.z.preprocess(e=>parseInt(v.z.string().parse(e),10),v.z.number().gte(1).lte(10)),server_ip:v.z.string().nonempty("Server IP is required").ip("Invalid IP address"),project_name:v.z.string().nonempty("Project name is required")}),N=v.z.object({name:v.z.string().nonempty("Router name is required"),asn:v.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),interfaces:v.z.array(v.z.object({name:v.z.string().nonempty("Interface name is required"),ip:g,peer:v.z.object({name:v.z.string().nonempty("Peer name is required"),interface:v.z.string().nonempty("Peer interface is required")})})),neighbors:v.z.array(v.z.object({ip:b,asn:v.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534")})),dhcp:v.z.object({subnet:g,interface:v.z.string().nonempty("Interface name is required"),range:v.z.tuple([b,b])}).optional(),internet_iface:v.z.object({name:v.z.string().nonempty("Interface name is required"),ip:g}).optional()}),S=v.z.object({name:v.z.string().nonempty("Host name is required"),interfaces:v.z.array(v.z.object({name:v.z.string().nonempty("Interface name is required"),ip:g.optional(),dhcp:v.z.boolean()})),gateway:b.optional()}),w=v.z.object({from:v.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),through:v.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),to:v.z.array(v.z.union([v.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),v.z.literal(-1)]))}),y=v.z.object({fromAS:v.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),toAS:v.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534")}),k=v.z.object({asn:v.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),neighbor_router:v.z.string().nonempty("Router name is required"),local_preference:v.z.number().min(1,"Local Preference must be at least 1"),network_ip:g}),_=v.z.object({router:v.z.string().nonempty("Router name is required"),network_ip:g.nonempty("Network IP is required"),to:v.z.array(v.z.union([v.z.number().min(1,"ASN must be at least 1").max(65534,"ASN must be at most 65534"),v.z.string()]))}),A=v.z.object({router:v.z.string().nonempty("Router name is required"),network_ip:g});var C=t(5153),I=t(4508);let T=s.forwardRef((e,r)=>{let{className:t,type:s,...a}=e;return(0,n.jsx)("input",{type:s,className:(0,I.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...a})});T.displayName="Input";var z=t(7053),P=t(535);let E=(0,P.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),R=s.forwardRef((e,r)=>{let{className:t,variant:s,size:a,asChild:i=!1,...l}=e,o=i?z.g7:"button";return(0,n.jsx)(o,{className:(0,I.cn)(E({variant:s,size:a,className:t})),ref:r,...l})});R.displayName="Button";var O=t(721);let V=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(O.fC,{className:(0,I.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:(0,n.jsx)(O.bU,{className:(0,I.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});V.displayName=O.fC.displayName;var F=t(6685),q=t(3289),D=t(7969),Z=t(9559);let L=F.fC,B=F.ZA,U=F.B4,H=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e;return(0,n.jsxs)(F.xz,{ref:r,className:(0,I.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,(0,n.jsx)(F.JO,{asChild:!0,children:(0,n.jsx)(q.Z,{className:"h-4 w-4 opacity-50"})})]})});H.displayName=F.xz.displayName;let J=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(F.u_,{ref:r,className:(0,I.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(D.Z,{className:"h-4 w-4"})})});J.displayName=F.u_.displayName;let M=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(F.$G,{ref:r,className:(0,I.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(q.Z,{className:"h-4 w-4"})})});M.displayName=F.$G.displayName;let G=s.forwardRef((e,r)=>{let{className:t,children:s,position:a="popper",...i}=e;return(0,n.jsx)(F.h_,{children:(0,n.jsxs)(F.VY,{ref:r,className:(0,I.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...i,children:[(0,n.jsx)(J,{}),(0,n.jsx)(F.l_,{className:(0,I.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(M,{})]})})});G.displayName=F.VY.displayName;let W=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(F.__,{ref:r,className:(0,I.cn)("px-2 py-1.5 text-sm font-semibold",t),...s})});W.displayName=F.__.displayName;let Y=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e;return(0,n.jsxs)(F.ck,{ref:r,className:(0,I.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[(0,n.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(F.wU,{children:(0,n.jsx)(Z.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(F.eT,{children:s})]})});Y.displayName=F.ck.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(F.Z0,{ref:r,className:(0,I.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=F.Z0.displayName;var $=t(4986);function Q(e){var r,t,l,o,d,c,u,m,h,f,p,x,v,g,b,j,S,w;let{initialValues:y,onChange:k}=e,{config:_,handleChange:A,handlePeerInterfaceSelect:C,handleInterfaceSelect:I,availableInterfacesOptions:z,removeInterface:P,removeInternetInterface:E,removeNeighbor:O,availableDhcpOptions:F,availableInternetOptions:q,handleInternetInterfaceSelect:D,form:Z}=function(e,r){let[t,n]=(0,s.useState)(e),[l,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(""),u=["Ethernet1","Ethernet2","Ethernet3","Ethernet4"],m=(0,a.cI)({resolver:(0,i.F)(N),mode:"onBlur",defaultValues:e});(0,s.useEffect)(()=>{n(e),o(e.interfaces.map(e=>"Loopback0"!==e.name?e.name:""))},[e]);let h=(e,s)=>{let a={...t,[e]:s};n(a),r(a)};return{config:t,handlePeerInterfaceSelect:(e,r)=>{let n=[...t.interfaces];n[e]={...n[e],peer:{...n[e].peer,interface:r}},h("interfaces",n)},handleChange:h,handleInterfaceSelect:(e,r)=>{let n=[...t.interfaces];n[e]={...n[e],name:r},h("interfaces",n),o(t=>{let n=[...t];return n[e]=r,n})},availableInterfacesOptions:e=>u.filter(r=>(!l.includes(r)||l[e]===r)&&!(null==d?void 0:d.includes(r))),removeInterface:e=>{h("interfaces",t.interfaces.filter((r,t)=>t!==e)),o(r=>r.filter((r,t)=>t!==e))},removeInternetInterface:()=>{h("internet_iface",{...t.internet_iface,name:""}),c(void 0)},removeNeighbor:e=>{h("neighbors",t.neighbors.filter((r,t)=>t!==e))},availableDhcpOptions:()=>l.filter(e=>""!==e),availableInternetOptions:()=>u.filter(e=>!l.includes(e)),handleInternetInterfaceSelect:e=>{h("internet_iface",{...t.internet_iface,name:e}),c(e)},form:m}}(y,k);return(0,n.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Router Name"}),(0,n.jsx)(T,{...Z.register("name"),type:"text",value:_.name,className:"border ".concat(Z.formState.errors.name?"border-red-500":"border-green-500"),onChange:e=>A("name",e.target.value)}),Z.formState.errors.name&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.name.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"AS Number"}),(0,n.jsx)(T,{...Z.register("asn",{valueAsNumber:!0}),type:"number",value:_.asn,className:"border ".concat(Z.formState.errors.asn?"border-red-500":"border-green-500"),onChange:e=>A("asn",Number(e.target.value))}),Z.formState.errors.asn&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.asn.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Interfaces"}),_.interfaces.map((e,r)=>{var t,s,a,i,l,o,d,c,u,m,h,f,p,x,v,g;return(0,n.jsxs)("div",{className:"md:flex md:space-x-2 my-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[0==r&&(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(T,{...Z.register("interfaces.".concat(r,".name")),placeholder:"Interface Name",value:e.name,disabled:!0})}),0!=r&&(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)(L,{value:e.name,onValueChange:e=>{Z.setValue("interfaces.".concat(r,".name"),e,{shouldValidate:!0}),I(r,e)},children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an Interface"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Interfaces"}),z(r).map(e=>(0,n.jsx)(Y,{value:e,children:e},e))]})})]})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(T,{...Z.register("interfaces.".concat(r,".ip")),className:"border ".concat(e.ip?(null===(s=Z.formState.errors.interfaces)||void 0===s?void 0:null===(t=s[r])||void 0===t?void 0:t.ip)?"border-red-500":"border-green-500":""),placeholder:"IP Address (eg. 192.168.10.1/24)",value:e.ip,onChange:t=>{let n=[..._.interfaces];n[r]={...e,ip:t.target.value},A("interfaces",n)}}),(null===(i=Z.formState.errors.interfaces)||void 0===i?void 0:null===(a=i[r])||void 0===a?void 0:a.ip)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.interfaces[r].ip.message})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(T,{placeholder:"Peer Name",...Z.register("interfaces.".concat(r,".peer.name")),disabled:0===r,value:e.peer.name,className:"border ".concat(e.peer.name?(null===(d=Z.formState.errors.interfaces)||void 0===d?void 0:null===(o=d[r])||void 0===o?void 0:null===(l=o.peer)||void 0===l?void 0:l.name)?"border-red-500":"border-green-500":""),onChange:t=>{let n=[..._.interfaces];n[r]={...e,peer:{...e.peer,name:t.target.value}},A("interfaces",n)}}),(null===(m=Z.formState.errors.interfaces)||void 0===m?void 0:null===(u=m[r])||void 0===u?void 0:null===(c=u.peer)||void 0===c?void 0:c.name)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.interfaces[r].peer.name.message})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(T,{placeholder:"Peer Interface",...Z.register("interfaces.".concat(r,".peer.interface")),disabled:0===r,value:e.peer.interface,className:"border ".concat(e.peer.interface?(null===(p=Z.formState.errors.interfaces)||void 0===p?void 0:null===(f=p[r])||void 0===f?void 0:null===(h=f.peer)||void 0===h?void 0:h.interface)?"border-red-500":"border-green-500":""),onChange:t=>{[..._.interfaces][r]={...e,peer:{...e.peer,interface:t.target.value}},C(r,t.target.value)}}),(null===(g=Z.formState.errors.interfaces)||void 0===g?void 0:null===(v=g[r])||void 0===v?void 0:null===(x=v.peer)||void 0===x?void 0:x.interface)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.interfaces[r].peer.interface.message})]}),(0,n.jsxs)("button",{disabled:0===r,onClick:()=>P(r),className:"text-red-500 hover:text-red-700 md:border-none md:bg-transparent md:p-0 border border-red-500 rounded-md px-2 py-1 flex items-center md:hidden",children:[(0,n.jsx)("span",{className:"mr-1",children:"Delete Interface"}),(0,n.jsx)($.Z,{size:20})]}),(0,n.jsx)("button",{disabled:0===r,onClick:()=>P(r),className:"text-red-500 hover:text-red-700 hidden sm:block",children:(0,n.jsx)($.Z,{size:20})})]},r)}),(0,n.jsx)(R,{className:"md:mt-2 mb-5 md:mb-0",onClick:()=>A("interfaces",[..._.interfaces,{name:"",ip:"",peer:{name:"",interface:""}}]),children:"Add Interface"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"BGP Neighbors"}),_.neighbors.map((e,r)=>{var t,s,a,i,l,o,d,c;return(0,n.jsxs)("div",{className:"md:flex md:space-x-2 my-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(T,{...Z.register("neighbors.".concat(r,".ip")),className:"border ".concat(e.ip?(null===(s=Z.formState.errors.neighbors)||void 0===s?void 0:null===(t=s[r])||void 0===t?void 0:t.ip)?"border-red-500":"border-green-500":""),placeholder:"Neighbor IP (eg. 192.168.10.2)",value:e.ip,onChange:t=>{let n=[..._.neighbors];n[r]={...e,ip:t.target.value},A("neighbors",n)}}),(null===(i=Z.formState.errors.neighbors)||void 0===i?void 0:null===(a=i[r])||void 0===a?void 0:a.ip)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.neighbors[r].ip.message})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(T,{placeholder:"AS Number",...Z.register("neighbors.".concat(r,".asn"),{valueAsNumber:!0}),type:"number",min:1,max:65534,className:"border ".concat(e.asn?(null===(o=Z.formState.errors.neighbors)||void 0===o?void 0:null===(l=o[r])||void 0===l?void 0:l.asn)?"border-red-500":"border-green-500":""),value:e.asn,onChange:t=>{let n=[..._.neighbors];n[r]={...e,asn:Number(t.target.value)},A("neighbors",n)}}),(null===(c=Z.formState.errors.neighbors)||void 0===c?void 0:null===(d=c[r])||void 0===d?void 0:d.asn)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.neighbors[r].asn.message})]}),(0,n.jsxs)("button",{disabled:0===r,onClick:()=>O(r),className:"text-red-500 hover:text-red-700 md:border-none md:bg-transparent md:p-0 border border-red-500 rounded-md px-2 py-1 flex items-center md:hidden",children:[(0,n.jsx)("span",{className:"mr-1",children:"Delete Neighbor"}),(0,n.jsx)($.Z,{size:20})]}),(0,n.jsx)("button",{disabled:0===r,onClick:()=>O(r),className:"text-red-500 hover:text-red-700 hidden sm:block",children:(0,n.jsx)($.Z,{size:20})})]},r)}),(0,n.jsx)(R,{className:"md:mt-2 mb-5 md:mb-0",onClick:()=>A("neighbors",[..._.neighbors,{ip:"",asn:0}]),children:"Add Neighbor"})]}),(0,n.jsxs)("div",{className:"border-t pt-4",children:[(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Enable DHCP"}),(0,n.jsx)(V,{checked:null!==(j=null===(r=_.dhcp)||void 0===r?void 0:r.enabled)&&void 0!==j&&j,onCheckedChange:e=>A("dhcp",e?{enabled:!0,subnet:"",interface:"",range:["",""]}:void 0)})]}),(null===(t=_.dhcp)||void 0===t?void 0:t.enabled)&&(0,n.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Subnet"}),(0,n.jsx)(T,{...Z.register("dhcp.subnet"),className:"border ".concat((null===(l=Z.formState.errors.dhcp)||void 0===l?void 0:l.subnet)?"border-red-500":"border-green-500"),placeholder:"192.168.100.0/24",value:_.dhcp.subnet,onChange:e=>{A("dhcp",{..._.dhcp,subnet:e.target.value})}}),(null===(o=Z.formState.errors.dhcp)||void 0===o?void 0:o.subnet)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.dhcp.subnet.message}),(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Interface Name"}),(0,n.jsxs)(L,{value:_.dhcp.interface,onValueChange:e=>{Z.setValue("dhcp.interface",e,{shouldValidate:!0}),A("dhcp",{..._.dhcp,interface:e})},children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an Interface"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Interfaces"}),F().map(e=>(0,n.jsx)(Y,{value:e,children:e},e))]})})]}),(0,n.jsx)("label",{className:"block text-sm font-medium",children:"DHCP Range"}),(0,n.jsxs)("div",{className:"md:flex md:space-x-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[(0,n.jsx)(T,{...Z.register("dhcp.range.0"),className:"border ".concat((null===(c=Z.formState.errors.dhcp)||void 0===c?void 0:null===(d=c.range)||void 0===d?void 0:d[0])?"border-red-500":"border-green-500"),placeholder:"Start IP (eg. 192.168.10.1)",value:_.dhcp.range[0],onChange:e=>{A("dhcp",{..._.dhcp,range:[e.target.value,_.dhcp.range[1]]})}}),(null===(u=Z.formState.errors.dhcp)||void 0===u?void 0:u.range)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.dhcp.range.message}),(0,n.jsx)(T,{...Z.register("dhcp.range.1"),className:"border ".concat((null===(h=Z.formState.errors.dhcp)||void 0===h?void 0:null===(m=h.range)||void 0===m?void 0:m[1])?"border-red-500":"border-green-500"),placeholder:"End IP (eg. 192.168.10.99)",value:_.dhcp.range[1],onChange:e=>{A("dhcp",{..._.dhcp,range:[_.dhcp.range[0],e.target.value]})}}),(null===(f=Z.formState.errors.dhcp)||void 0===f?void 0:f.range)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.dhcp.range.message})]})]})]}),(0,n.jsxs)("div",{className:"border-t pt-4",children:[(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Enable Internet"}),(0,n.jsx)(V,{checked:null!==(S=null===(p=_.internet_iface)||void 0===p?void 0:p.enabled)&&void 0!==S&&S,onCheckedChange:e=>{e||E(),A("internet_iface",e?{enabled:!0,name:"",ip:""}:void 0)}})]}),(null===(x=_.internet_iface)||void 0===x?void 0:x.enabled)&&(0,n.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Internet Interface"}),(0,n.jsxs)("div",{className:"md:flex md:space-x-2 my-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)(L,{value:_.internet_iface.name,onValueChange:e=>{Z.setValue("internet_iface.name",e,{shouldValidate:!0}),D(e)},children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select interface"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Interfaces"}),q().map(e=>(0,n.jsx)(Y,{value:e,children:e},e))]})})]})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(T,{...Z.register("internet_iface.ip"),className:"border ".concat((null===(v=_.internet_iface)||void 0===v?void 0:v.ip)?(null===(g=Z.formState.errors.internet_iface)||void 0===g?void 0:g.ip)?"border-red-500":"border-green-500":""),placeholder:"IP Address (eg. 192.168.10.1/24)",value:_.internet_iface.ip,onChange:e=>{A("internet_iface",{..._.internet_iface,ip:e.target.value})}}),(null===(b=Z.formState.errors.internet_iface)||void 0===b?void 0:b.ip)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:Z.formState.errors.internet_iface.ip.message})]})]})]})]}),(0,n.jsx)("div",{className:"border-t pt-4",children:(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Enable BGP Redistribution"}),(0,n.jsx)(V,{checked:null!==(w=_.redistribute_bgp)&&void 0!==w&&w,onCheckedChange:e=>{A("redistribute_bgp",e)}})]})})]})}function X(e){let{initialValues:r,onChange:t}=e,{config:l,handleChange:o,handleInterfaceSelection:d,getAvailableInterfaces:c,removeInterface:u,form:m}=function(e,r){let[t,n]=(0,s.useState)(e),[l,o]=(0,s.useState)([]),d=["Ethernet1","Ethernet2","Ethernet3","Ethernet4"],c=(0,a.cI)({resolver:(0,i.F)(S),mode:"onBlur",defaultValues:e});(0,s.useEffect)(()=>{n(e),o(e.interfaces.map(e=>e.name))},[e]);let u=(e,s)=>{let a={...t,[e]:s};n(a),r(a)};return{config:t,handleChange:u,handleInterfaceSelection:(e,r)=>{let n=[...t.interfaces];n[e]={...n[e],name:r},u("interfaces",n),o(t=>{let n=[...t];return n[e]=r,n})},getAvailableInterfaces:e=>d.filter(r=>!l.includes(r)||l[e]===r),removeInterface:e=>{u("interfaces",t.interfaces.filter((r,t)=>t!==e)),o(r=>r.filter((r,t)=>t!==e))},form:c}}(r,t);return(0,n.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Host Name"}),(0,n.jsx)(T,{...m.register("name"),type:"text",value:l.name,className:"border ".concat(m.formState.errors.name?"border-red-500":"border-green-500"),onChange:e=>o("name",e.target.value)}),m.formState.errors.name&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.name.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Interfaces"}),l.interfaces.map((e,r)=>{var t,s,a,i,h,f;return(0,n.jsxs)("div",{className:"md:flex md:space-x-2 my-2 space-y-3 md:space-y-0 mb-10 md:mb-0",children:[(0,n.jsxs)(L,{...m.register("interfaces.".concat(r,".name")),value:l.interfaces[r].name,onValueChange:e=>d(r,e),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an Interface"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Interfaces"}),c(r).map(e=>(0,n.jsx)(Y,{value:e,children:e},e))]})})]}),(null===(s=m.formState.errors.interfaces)||void 0===s?void 0:null===(t=s[r])||void 0===t?void 0:t.name)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.interfaces[r].name.message}),!l.interfaces[r].dhcp&&(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(T,{...m.register("interfaces.".concat(r,".ip")),className:"border ".concat(e.ip?(null===(i=m.formState.errors.interfaces)||void 0===i?void 0:null===(a=i[r])||void 0===a?void 0:a.ip)?"border-red-500":"border-green-500":""),placeholder:"IP Address (eg. 192.168.10.1/24)",value:e.ip,onChange:t=>{let n=[...l.interfaces];n[r]={...e,ip:t.target.value},o("interfaces",n)}}),(null===(f=m.formState.errors.interfaces)||void 0===f?void 0:null===(h=f[r])||void 0===h?void 0:h.ip)&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.interfaces[r].ip.message})]}),(0,n.jsxs)("div",{className:"flex space-x-4 my-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-nowrap my-auto",children:"Enable DHCP"}),(0,n.jsx)(V,{className:"my-auto",checked:l.interfaces[r].dhcp,onCheckedChange:t=>o("interfaces",[...l.interfaces.slice(0,r),{...e,dhcp:t},...l.interfaces.slice(r+1)])})]}),(0,n.jsxs)("button",{disabled:0===r,onClick:()=>u(r),className:"text-red-500 hover:text-red-700 md:border-none md:bg-transparent md:p-0 border border-red-500 rounded-md px-2 py-1 flex items-center md:hidden",children:[(0,n.jsx)("span",{className:"mr-1",children:"Delete Interface"}),(0,n.jsx)($.Z,{size:20})]}),(0,n.jsx)("button",{disabled:0===r,onClick:()=>u(r),className:"text-red-500 hover:text-red-700 hidden sm:block",children:(0,n.jsx)($.Z,{size:20})})]},r)}),(0,n.jsx)(R,{className:"md:mt-2 mb-5 md:mb-0",onClick:()=>o("interfaces",[...l.interfaces,{name:"",ip:"",dhcp:!1}]),children:"Add Interface"})]}),!l.interfaces.some(e=>e.dhcp)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Gateway"}),(0,n.jsx)(T,{...m.register("gateway"),type:"text",placeholder:"IP Address (eg. 192.168.1.1)",value:l.gateway,className:"border ".concat(l.gateway?m.formState.errors.gateway?"border-red-500":"border-green-500":""),onChange:e=>{o("gateway",e.target.value)}}),m.formState.errors.gateway&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.gateway.message})]})]})}function K(e){var r,t;let{initialValues:l,availableASOptions:o,onChange:d}=e,{config:c,form:u,handleChange:m,handleToChange:h,addToField:f,getAvailableASOptions:p,removeToAS:x}=function(e,r,t){let[n,l]=(0,s.useState)(e),o=(0,a.cI)({resolver:(0,i.F)(w),mode:"onBlur",defaultValues:e});(0,s.useEffect)(()=>{l(e)},[e]);let d=(e,r)=>{let s={...n,[e]:r};l(s),t(s)},c=(e,r,t,n)=>{let s=[];"from"!==t&&null!==e.from&&s.push(e.from),"through"!==t&&null!==e.through&&s.push(e.through),e.to.forEach((e,r)=>{("to"!==t||r!==n)&&s.push(e)});let a=r.filter(e=>!s.includes(e));"to"!==t&&(a=a.filter(e=>-1!==e));let i=null;return null===(i="from"===t?e.from:"through"===t?e.through:e.to[n])||a.includes(i)||a.push(i),a};return{config:n,form:o,handleChange:d,handleToChange:(e,r)=>{let t=[...n.to];t[e]=r,d("to",t)},addToField:()=>{let e=c(n,r,"to")[0];if(void 0==e){console.error("No available AS numbers to add");return}d("to",[...n.to,e])},getAvailableASOptions:c,removeToAS:e=>{d("to",n.to.filter((r,t)=>t!==e))}}}(l,o,d);return(0,n.jsxs)("div",{className:"my-3",children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Transit Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:'Transit means that traffic from the "From" AS can reach the "To" AS via the intermediate AS "Through", which has a business relationship with both "From" and "To", allowing end-to-end connectivity.'}),(0,n.jsxs)("div",{className:"text-sm grid grid-cols-3 gap-x-10 w-fit mx-auto my-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"From AS"}),(0,n.jsxs)(L,{value:null===c.from?"":String(c.from),onValueChange:e=>m("from",Number(e)),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an AS",children:null!==(r=c.from)&&void 0!==r?r:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"AS Number"}),p(c,o,"from").map(e=>(0,n.jsx)(Y,{value:String(e),children:e},e))]})})]}),u.formState.errors.from&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.from.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Through AS"}),(0,n.jsxs)(L,{value:null===c.through?"":String(c.through),onValueChange:e=>m("through",Number(e)),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an AS",children:null!==(t=c.through)&&void 0!==t?t:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"AS Number"}),p(c,o,"through").map(e=>(0,n.jsx)(Y,{value:String(e),children:e},e))]})})]}),u.formState.errors.through&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.through.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"To AS"}),c.to.map((e,r)=>{var t;return(0,n.jsxs)("div",{className:"flex space-x-4 mb-2",children:[(0,n.jsxs)(L,{value:String(e),onValueChange:e=>h(r,Number(e)),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an AS",children:-1===e?"Internet":e})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"AS Number"}),p(c,o,"to",r).map(e=>(0,n.jsx)(Y,{value:String(e),children:-1===e?"Internet":e},e))]})})]}),(null===(t=u.formState.errors.to)||void 0===t?void 0:t[r])&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.to[r].message}),(0,n.jsxs)("button",{disabled:0===r,onClick:()=>x(r),className:"text-red-500 hover:text-red-700 md:border-none md:bg-transparent md:p-0 border border-red-500 rounded-md px-2 py-1 flex items-center md:hidden",children:[(0,n.jsx)("span",{className:"mr-1",children:"Delete Interface"}),(0,n.jsx)($.Z,{size:20})]}),(0,n.jsx)("button",{disabled:0===r,onClick:()=>x(r),className:"text-red-500 hover:text-red-700 hidden sm:block",children:(0,n.jsx)($.Z,{size:20})})]},r)}),(0,n.jsx)(R,{onClick:f,children:"Add To AS"})]})]})]})}function ee(e){var r,t;let{initialValues:l,availableASOptions:o,onChange:d}=e,{config:c,form:u,handleChange:m,getAvailableASOptions:h}=function(e,r,t){let[n,l]=(0,s.useState)(e),o=(0,a.cI)({resolver:(0,i.F)(y),mode:"onBlur",defaultValues:e});return(0,s.useEffect)(()=>{l(e)},[e]),{config:n,form:o,handleChange:(e,r)=>{let s={...n,[e]:r};l(s),t(s)},getAvailableASOptions:(e,r,t)=>{let n=[];return null!==e.fromAS&&"fromAS"!==t&&n.push(e.fromAS),null!==e.toAS&&"toAS"!==t&&n.push(e.toAS),r.filter(e=>!n.includes(e))}}}(l,0,d);return(0,n.jsxs)("div",{className:"my-3",children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Peering Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:'Peering allows direct traffic exchange between "From" AS and "To" AS without an intermediary.'}),(0,n.jsxs)("div",{className:"text-sm grid grid-cols-2 gap-x-10 w-fit mx-auto my-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"From AS"}),(0,n.jsxs)(L,{value:null===c.fromAS?"":String(c.fromAS),onValueChange:e=>m("fromAS",Number(e)),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an AS",children:null!==(r=c.fromAS)&&void 0!==r?r:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"AS Number"}),h(c,o,"fromAS").map(e=>(0,n.jsx)(Y,{value:String(e),children:e},e))]})})]}),u.formState.errors.fromAS&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.fromAS.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"To AS"}),(0,n.jsxs)(L,{value:null===c.toAS?"":String(c.toAS),onValueChange:e=>m("toAS",Number(e)),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an AS",children:null!==(t=c.toAS)&&void 0!==t?t:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"AS Number"}),h(c,o,"toAS").map(e=>(0,n.jsx)(Y,{value:String(e),children:e},e))]})})]}),u.formState.errors.toAS&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:u.formState.errors.toAS.message})]})]})]})}var er=t(517);function et(e){let{config:r}=e,t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=new Set(r.routers.map(e=>e.name)),n={};r.routers.forEach(e=>{n[e.asn]||(n[e.asn]=[]),n[e.asn].push(e.name)});let s=new Set;r.links.forEach(e=>{e.forEach(e=>{let[r]=e.split(":");s.add(r)})});let a=[],i={},l=1;s.forEach(t=>{var n;let s=e.has(t),o=(null===(n=r.routers.find(e=>e.name===t))||void 0===n?void 0:n.asn)||0;a.push({id:l,label:s?"".concat(t,"\nASN: ").concat(o):t,shape:"image",image:s?"/imgs/router.png":"/imgs/computer.png"}),i[t]=l,l++});let o=r.links.map(e=>{let[r,t]=e,n=r.split(":")[0],s=t.split(":")[0];return{from:i[n],to:i[s]}}),d=Object.entries(n).map(e=>{let[r,t]=e,n=t.map(e=>i[e]);return{label:"ASN: ".concat(r),nodes:n}});if(t.current){let e=new er.qg(a),r=new er.qg(o),n={physics:{stabilization:!0},groups:d.reduce((e,r)=>(r.nodes.forEach(t=>{e[t]={shape:"box",label:r.label,color:{border:"#000",background:"#f0f0f0"}}}),e),{})};new er.Zc(t.current,{nodes:e,edges:r},n)}},[r]),(0,n.jsxs)("div",{className:"space-y-4 max-w-5xl lg:mx-auto my-10 mx-10",children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Your Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:'This is a visualization of the network topology you have configured. If you see any issues, you can go back and modify the configuration, or you can proceed clicking the "Deploy Network" button above.'}),(0,n.jsx)("div",{className:"h-[600px] border border-gray-200 rounded-md shadow-md",ref:t})]})}let en=()=>(0,n.jsxs)("svg",{className:"animate-spin size-1.5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]});var es=t(6394);let ea=(0,P.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ei=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(es.f,{ref:r,className:(0,I.cn)(ea(),t),...s})});ei.displayName=es.f.displayName;let el=a.RV,eo=s.createContext({}),ed=e=>{let{...r}=e;return(0,n.jsx)(eo.Provider,{value:{name:r.name},children:(0,n.jsx)(a.Qr,{...r})})},ec=()=>{let e=s.useContext(eo),r=s.useContext(eu),{getFieldState:t,formState:n}=(0,a.Gc)(),i=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=r;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},eu=s.createContext({}),em=s.forwardRef((e,r)=>{let{className:t,...a}=e,i=s.useId();return(0,n.jsx)(eu.Provider,{value:{id:i},children:(0,n.jsx)("div",{ref:r,className:(0,I.cn)("space-y-2",t),...a})})});em.displayName="FormItem";let eh=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:a,formItemId:i}=ec();return(0,n.jsx)(ei,{ref:r,className:(0,I.cn)(a&&"text-destructive",t),htmlFor:i,...s})});eh.displayName="FormLabel";let ef=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:a,formDescriptionId:i,formMessageId:l}=ec();return(0,n.jsx)(z.g7,{ref:r,id:a,"aria-describedby":s?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!s,...t})});ef.displayName="FormControl",s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:a}=ec();return(0,n.jsx)("p",{ref:r,id:a,className:(0,I.cn)("text-[0.8rem] text-muted-foreground",t),...s})}).displayName="FormDescription";let ep=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e,{error:i,formMessageId:l}=ec(),o=i?String(null==i?void 0:i.message):s;return o?(0,n.jsx)("p",{ref:r,id:l,className:(0,I.cn)("text-[0.8rem] font-medium text-destructive",t),...a,children:o}):null});ep.displayName="FormMessage";var ex=t(3134);let ev=ex.fC,eg=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(ex.ck,{ref:r,className:(0,I.cn)("border-b",t),...s})});eg.displayName="AccordionItem";let eb=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e;return(0,n.jsx)(ex.h4,{className:"flex",children:(0,n.jsxs)(ex.xz,{ref:r,className:(0,I.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",t),...a,children:[s,(0,n.jsx)(q.Z,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});eb.displayName=ex.xz.displayName;let ej=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e;return(0,n.jsx)(ex.VY,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:(0,n.jsx)("div",{className:(0,I.cn)("pb-4 pt-0",t),children:s})})});function eN(e){var r,t,l;let{initialValues:o,availableASOptions:d,availableRouters:c,onChange:u}=e,{config:m,form:h,handleChange:f,getAvailableRouterOptions:p,getAvailableLPASOptions:x,handleNeighborChange:v,getAvailableNetworksOptions:g}=function(e,r){let[t,n]=(0,s.useState)(e),l=(0,a.cI)({resolver:(0,i.F)(k),mode:"onBlur",defaultValues:e});return(0,s.useEffect)(()=>{n(e)},[e]),{config:t,form:l,handleChange:(e,s)=>{let a={...t,[e]:s};n(a),r(a)},getAvailableRouterOptions:(e,r)=>r.filter(r=>r.asn!=e.asn),getAvailableLPASOptions:(e,r,t)=>{let n=[];return null!==e.asn&&"asn"!==t&&n.push(e.asn),r.filter(e=>!n.includes(e))},handleNeighborChange:e=>{let s={...t,neighbor_router:e,network_ip:""};n(s),r(s)},getAvailableNetworksOptions:(e,r)=>{let t=r.filter(r=>r.name===e.neighbor_router);if(t.length>1||!t.length)return[];let n=t[0].subnetworks;return n.includes("0.0.0.0/0")||n.push("0.0.0.0/0"),n||[]}}}(o,u);return(0,n.jsxs)("div",{className:"my-3",children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Local Preference Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:"The local preference attribute is used to select the exit point for an autonomous system."}),(0,n.jsxs)("div",{className:"text-sm grid grid-cols-4 gap-x-10 w-fit mx-auto my-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"AS Number"}),(0,n.jsxs)(L,{value:null===m.asn?"":String(m.asn),onValueChange:e=>f("asn",Number(e)),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an AS",children:null!==(r=m.asn)&&void 0!==r?r:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"AS Number"}),x(m,d,"asn").map(e=>(0,n.jsx)(Y,{value:String(e),children:e},e))]})})]}),h.formState.errors.asn&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:h.formState.errors.asn.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Neighbor router"}),(0,n.jsxs)(L,{value:null===m.asn?"":String(m.asn),onValueChange:e=>{v(e)},children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select a router",children:null!==(t=m.neighbor_router)&&void 0!==t?t:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Router name"}),p(m,c).map(e=>(0,n.jsx)(Y,{value:e.name,children:e.name},e.name))]})})]})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Network"}),(0,n.jsxs)(L,{value:null===m.network_ip?"":m.network_ip,onValueChange:e=>f("network_ip",e),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select a Network",children:null!==(l=m.network_ip)&&void 0!==l?l:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Networks"}),g(m,c).map(e=>(0,n.jsx)(Y,{value:e,children:e},e))]})})]})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Local Preference"}),(0,n.jsx)(T,{...h.register("local_preference",{valueAsNumber:!0}),type:"number",placeholder:"Local Preference",value:m.local_preference,onChange:e=>{f("local_preference",Number(e.target.value))}}),h.formState.errors.local_preference&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:h.formState.errors.local_preference.message})]})]})]})}function eS(e){var r,t;let{initialValues:l,availableASOptions:o,availableRouterOptions:d,onChange:c}=e,{config:u,form:m,handleChange:h,handleRouterChange:f,getAvailableASOptions:p,getAvailableNetworksOptions:x,handleToChange:v,addToField:g,removeToAS:b}=function(e,r,t){let[n,l]=(0,s.useState)(e),{toast:o}=(0,C.pm)(),d=(0,a.cI)({resolver:(0,i.F)(_),mode:"onBlur",defaultValues:e});(0,s.useEffect)(()=>{l(e)},[e]);let c=(e,r)=>{let s={...n,[e]:r};console.log("updatedConfig:"+s),l(s),t(s)},u=(e,r)=>r.filter(r=>r.name===e),m=(e,r)=>{let t=r.filter(r=>r.name===e);return t.length>1||!t.length?0:t[0].asn},h=(e,r,t,n)=>{let s=[],a=m(e.router,t);s.push(a);let i=u(e.router,t);if(i.length>1||!i.length)return[];let l=[];i[0].neighbors.forEach(e=>{l.push(e.asn)}),e.to.forEach((e,r)=>{r!==n&&"number"==typeof e&&s.push(e)});let o=r.filter(e=>!s.includes(e)&&l.includes(e));return o.push(-1),o};return{config:n,form:d,handleChange:c,handleRouterChange:e=>{let r={...n,router:e,network_ip:"",to:[0]};l(r),t(r)},getAvailableASOptions:h,getAvailableNetworksOptions:(e,r)=>{let t=r.filter(r=>r.name===e.router);return t.length>1||!t.length?[]:t[0].subnetworks||[]},handleToChange:(e,r)=>{let t=[...n.to];t[e]=r,c("to",t)},addToField:e=>{let t=h(n,r,e)[0];if(void 0==t){console.error("No available AS numbers to add"),o({variant:"destructive",title:"No available AS",description:"There are  not available AS numbers to add."});return}c("to",[...n.to,t])},removeToAS:e=>{c("to",n.to.filter((r,t)=>t!==e))}}}(l,o,c);return(0,n.jsxs)("div",{className:"my-3",children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Announce Network Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:"The announce network configuration is used to announce a network to a specific AS."}),(0,n.jsxs)("div",{className:"text-sm grid grid-cols-3 gap-x-10 w-fit mx-auto my-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Router"}),(0,n.jsxs)(L,{value:null===u.router?"":u.router,onValueChange:e=>f(e),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select a Router",children:null!==(r=u.router)&&void 0!==r?r:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Router"}),d.map(e=>(0,n.jsx)(Y,{value:e.name,children:e.name},e.name))]})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Network to announce"}),(0,n.jsxs)(L,{value:null===u.network_ip?"":u.network_ip,onValueChange:e=>h("network_ip",e),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select a Network",children:null!==(t=u.network_ip)&&void 0!==t?t:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Networks"}),x(u,d).map(e=>(0,n.jsx)(Y,{value:e,children:e},e))]})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"To AS"}),u.to.map((e,r)=>{var t;return(0,n.jsxs)("div",{className:"flex space-x-4 mb-2",children:[(0,n.jsxs)(L,{value:String(e),onValueChange:e=>v(r,Number(e)),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select an AS",children:-1===e?"Internet":e})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"AS Number"}),p(u,o,d,r).map(e=>(0,n.jsx)(Y,{value:String(e),children:-1===e?"Internet":e},e))]})})]}),(null===(t=m.formState.errors.to)||void 0===t?void 0:t[r])&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:m.formState.errors.to[r].message}),(0,n.jsxs)("button",{disabled:0===r,onClick:()=>b(r),className:"text-red-500 hover:text-red-700 md:border-none md:bg-transparent md:p-0 border border-red-500 rounded-md px-2 py-1 flex items-center md:hidden",children:[(0,n.jsx)("span",{className:"mr-1",children:"Delete Interface"}),(0,n.jsx)($.Z,{size:20})]}),(0,n.jsx)("button",{disabled:0===r,onClick:()=>b(r),className:"text-red-500 hover:text-red-700 hidden sm:block",children:(0,n.jsx)($.Z,{size:20})})]},r)}),(0,n.jsx)(R,{onClick:()=>g(d),children:"Add To AS"})]})]})]})}function ew(e){var r,t;let{initialValues:l,announcedNetworks:o,availableRouterOptions:d,onChange:c}=e,{config:u,handleChange:m,form:h,handleRouterChange:f,getAvailableNetworksOptions:p}=function(e,r){let[t,n]=(0,s.useState)(e),l=(0,a.cI)({resolver:(0,i.F)(A),mode:"onBlur",defaultValues:e});return(0,s.useEffect)(()=>{n(e)},[e]),{config:t,handleChange:(e,s)=>{let a={...t,[e]:s};n(a),r(a)},form:l,handleRouterChange:e=>{let s={...t,router:e,network_ip:""};n(s),r(s)},getAvailableNetworksOptions:(e,r)=>{let t=r[e.router];return t&&0!==t.length?t:[]}}}(l,c);return(0,n.jsxs)("div",{className:"my-3",children:[(0,n.jsx)("h1",{className:"font-bold text-base",children:"Stop Announce Configuration"}),(0,n.jsx)("p",{className:"text-sm",children:"The stop announce configuration is used to stop announcing a network to a specific router."}),(0,n.jsxs)("div",{className:"text-sm grid grid-cols-2 gap-x-10 w-fit mx-auto my-5",children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Router"}),(0,n.jsxs)(L,{value:null===u.router?"":u.router,onValueChange:e=>f(e),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select a Router",children:null!==(r=u.router)&&void 0!==r?r:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Router"}),d.map(e=>(0,n.jsx)(Y,{value:e.name,children:e.name},e.name))]})})]}),h.formState.errors.router&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.formState.errors.router.message})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("label",{className:"block font-semibold mb-1",children:"Network to stop announce"}),(0,n.jsxs)(L,{value:null===u.network_ip?"":u.network_ip,onValueChange:e=>m("network_ip",e),children:[(0,n.jsx)(H,{className:"w-full",children:(0,n.jsx)(U,{placeholder:"Select a Network",children:null!==(t=u.network_ip)&&void 0!==t?t:"Select"})}),(0,n.jsx)(G,{children:(0,n.jsxs)(B,{children:[(0,n.jsx)(W,{children:"Networks"}),p(u,o).map(e=>(0,n.jsx)(Y,{value:e,children:e},e))]})})]}),h.formState.errors.network_ip&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.formState.errors.network_ip.message})]})]})]})}function ey(){let[e,r]=(0,s.useState)(void 0),[t,v]=(0,s.useState)(void 0),{form:g,onSubmit:b,routerConfigs:N,updateRouterConfig:S,hostConfigs:w,updateHostConfig:y,transitConfigs:k,peeringConfigs:_,localPreferenceConfigs:A,announceConfigs:I,stopAnnounceConfigs:z,announcedNetworks:P,isConfigGenerated:E,isDeploying:O,getNetworkTopologyResponse:V,handleGenerateConfiguration:F,handleDeployNetwork:q,handleTransitConfigsChange:D,handlePeeringConfigsChange:Z,handleLocalPreferenceConfigsChange:L,handleAnnounceConfigsChange:B,handleStopAnnounceConfigsChange:U,getAvailableASOptions:H,getAvailableASOptionsWithInternet:J,getAvailableRouters:M,handleTransitConfigsSend:G,handlePeeringConfigsSend:W,handleLocalPreferenceConfigsSend:Y,handleAnnounceConfigSend:$,handleStopAnnounceConfigSend:er}=function(){let[e,r]=(0,s.useState)([]),[t,n]=(0,s.useState)([]),[v,g]=(0,s.useState)(),[b,N]=(0,s.useState)(),[S,w]=(0,s.useState)(),[y,k]=(0,s.useState)(),[_,A]=(0,s.useState)(),[I,T]=(0,s.useState)({}),[z,P]=(0,s.useState)(null),[E,R]=(0,s.useState)(void 0),[O,V]=(0,s.useState)(!1),[F,q]=(0,s.useState)(!1),{toast:D}=(0,C.pm)(),Z=(0,a.cI)({resolver:(0,i.F)(j),defaultValues:l}),L=async(e,r)=>{if(!e.every((r,t)=>e.findIndex(e=>e.name===r.name)===t)){D({variant:"destructive",title:"Router names are not unique.",description:"Please make sure that the names of the routers are unique."});return}let t={project_name:Z.getValues("project_name"),routers:e,hosts:r};if(!E){D({variant:"destructive",title:"Server IP is not set.",description:"Please set the server IP in the form."});return}try{console.log(JSON.stringify(t));let e=await c(t,E);P(e),D({variant:"default",title:"Configuration generated!",description:"The configuration has been generated successfully."}),V(!0)}catch(e){console.error("Error:",e),D({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e}),V(!1)}},B=(e,r)=>e.routers.filter(e=>e.asn===r),U=(e,r)=>e.routers.filter(e=>r.includes(e.asn)),H=(e,r,t)=>e.links.filter(e=>{let[n,s]=e;return r.some(e=>n.split(":")[0]===e.name||s.split(":")[0]===e.name)&&t.some(e=>n.split(":")[0]===e.name||s.split(":")[0]===e.name)}),J=(e,r)=>e.find(e=>r.some(r=>{let[t,n]=r;return t.split(":")[0]===e.name||n.split(":")[0]===e.name}))||(console.error("Router not found."),e[0]),M=(e,r,t)=>t.map(t=>e.links.find(e=>{let[n,s]=e;return r.some(e=>n.split(":")[0]===e.name&&s.split(":")[0]===t.name||n.split(":")[0]===t.name&&s.split(":")[0]===e.name)})||(console.error("Through-To link not found."),["",""])),G=(e,r)=>{let t=r.find(r=>{let[t,n]=r;return t.split(":")[0]===e.name||n.split(":")[0]===e.name});return t?t[0].split(":")[0]===e.name?t[0].split(":")[1]:t[1].split(":")[1]:null},W=(e,r,t,n,s,a)=>{var i;let l=r.map(r=>{var n;if(!r)return console.error("Link not found.");let[s,a]=r,i=t.find(e=>e.name===a.split(":")[0]||e.name===s.split(":")[0]);if(!i)return console.error("To router not found.");let l=s.split(":")[0]===e.name?s.split(":")[1]:a.split(":")[1];return{asn:i.asn,my_router_ip:null===(n=e.interfaces.find(e=>e.name===l))||void 0===n?void 0:n.ip.split("/")[0]}}).filter(Boolean);return l.unshift({asn:n.asn,my_router_ip:(null===(i=e.interfaces.find(e=>e.name===s))||void 0===i?void 0:i.ip.split("/")[0])||""}),a&&l.push("Internet"),l},Y=(e,r,t)=>{let n=r.map(r=>{var t,n;let s=e.find(e=>{if(!e)return!1;let[t,n]=e;return t.split(":")[0]===r.name||n.split(":")[0]===r.name});if(!s)return console.error("Link not found."),null;let[a,i]=s,l=a.split(":")[0]===r.name?a.split(":")[1]:i.split(":")[1];return{asn:r.asn,router:r.name,router_ip:null===(t=r.interfaces.find(e=>e.name===l))||void 0===t?void 0:t.ip.split("/")[0],mngt_ip:null===(n=r.mngt_ipv4)||void 0===n?void 0:n.split("/")[0]}}).filter(e=>null!==e);return t&&n.push("Internet"),console.log(n),n},$=(e,r,t,n,s)=>{var a,i,l,o,d,c;let u=null!==(o=null===(a=e.interfaces.find(e=>e.name===s))||void 0===a?void 0:a.ip.split("/")[0])&&void 0!==o?o:"",m=null!==(d=null===(i=e.mngt_ipv4)||void 0===i?void 0:i.split("/")[0])&&void 0!==d?d:"",h=null!==(c=null===(l=r.mngt_ipv4)||void 0===l?void 0:l.split("/")[0])&&void 0!==c?c:"",f=t.map(e=>{var r;return"string"==typeof e?e:{asn:e.asn,my_router_ip:null!==(r=e.my_router_ip)&&void 0!==r?r:""}});return{from_:{asn:e.asn,router:e.name,router_ip:u,mngt_ip:m},through:{asn:r.asn,router:r.name,mngt_ip:h,router_ip:f},to:n}},Q=async()=>{var e,r;if(!z||!v)return;let t=B(z,v.from);t.length||D({variant:"destructive",title:"From router not found.",description:"The router with the ASN provided was not found."});let n=B(z,v.through);if(!n.length){D({variant:"destructive",title:"Through router not found.",description:"The router with the ASN provided was not found."});return}let s=v.to.includes(-1),a=U(z,v.to.filter(e=>-1!==e));if(!a.length){D({variant:"destructive",title:"To router not found.",description:"The router with the ASN provided was not found."});return}let i=H(z,t,n);if(!i.length){D({variant:"destructive",title:"From-Through link not found.",description:"There is no link between the from and through routers."});return}let l=J(t,i);if(!l){D({variant:"destructive",title:"From router not found.",description:"The from router was not found."});return}let o=J(n,i);if(!o){D({variant:"destructive",title:"Through router not found.",description:"The through router was not found."});return}let d=M(z,n,a);if((null===(e=d[0])||void 0===e?void 0:e[0])===""&&(null===(r=d[0])||void 0===r?void 0:r[1])===""){D({variant:"destructive",title:"Through-To link not found.",description:"There is no link between the through and to routers."});return}let c=G(l,i),u=G(o,i),h=W(o,d,a,l,u,s),f=$(l,o,h,Y(d,a,s),c);if(!E){D({variant:"destructive",title:"Server IP not set.",description:"Please set the server IP in the form."});return}try{await m(f,E),D({variant:"default",title:"Transit configuration generated!",description:"The configuration has been generated successfully."})}catch(e){console.error("Error:",e),D({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}},X=(e,r,t,n)=>{var s,a,i,l,o,d,c,u;return{asn:e.asn,router_ip:null!==(o=null===(s=e.interfaces.find(e=>e.name===t))||void 0===s?void 0:s.ip.split("/")[0])&&void 0!==o?o:"",mngt_ip:null!==(d=null===(a=e.mngt_ipv4)||void 0===a?void 0:a.split("/")[0])&&void 0!==d?d:"",peer:{asn:r.asn,router_ip:null!==(c=null===(i=r.interfaces.find(e=>e.name===n))||void 0===i?void 0:i.ip.split("/")[0])&&void 0!==c?c:"",mngt_ip:null!==(u=null===(l=r.mngt_ipv4)||void 0===l?void 0:l.split("/")[0])&&void 0!==u?u:""}}},K=async()=>{if(!z||!b)return;let e=B(z,b.fromAS);if(!e.length){D({variant:"destructive",title:"Father peer router not found.",description:"No router with the ASN provided was found."});return}let r=B(z,b.toAS);if(!r.length){D({variant:"destructive",title:"Son peer router not found.",description:"No router with the ASN provided was found."});return}let t=H(z,e,r);if(!t.length){D({variant:"destructive",title:"From-To link not found.",description:"There is no link between the From and To AS."});return}let n=J(e,t);if(!n){D({variant:"destructive",title:"From peer router not found.",description:"From peer router not found."});return}let s=J(r,t);if(!s){D({variant:"destructive",title:"To peer router not found.",description:"To peer router not found."});return}let a=G(n,t),i=G(s,t),l=X(n,s,a,i);if(!E){D({variant:"destructive",title:"Server IP not set.",description:"Please set the server IP in the form."});return}try{await h(l,E),D({variant:"default",title:"Peering configuration generated!",description:"The configuration has been generated successfully."})}catch(e){console.error("Error:",e),D({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}},ee=(e,r)=>e.routers.filter(e=>e.name===r),er=(e,r)=>e.map(e=>{let t=e.neighbors.find(e=>r.some(r=>r.interfaces.some(r=>r.ip.split("/")[0]===e.ip)));if(t)return{router:e,matchedIp:t.ip}}).find(e=>void 0!==e),et=(e,r,t,n)=>{var s,a;return{asn:e.asn,router:e.name,neighbor_ip:r,mngt_ip:null!==(a=null===(s=e.mngt_ipv4)||void 0===s?void 0:s.split("/")[0])&&void 0!==a?a:"",local_preference:t,network:n}},en=async()=>{if(!z||!S)return;if(""===S.network_ip){D({variant:"destructive",title:"Network IP not set.",description:"Please set the network IP in the form."});return}let e=B(z,S.asn);if(!e.length){D({variant:"destructive",title:"AS routers not founded.",description:"No router with the ASN provided was found."});return}let r=ee(z,S.neighbor_router);if(r.length>1||!r){D({variant:"destructive",title:"Neighbor router not found.",description:"The neighbor router was not found."});return}let t=er(e,r);if(!t){D({variant:"destructive",title:"Neighbor router not found.",description:"The Neighbor router was not found."});return}let n=et(t.router,t.matchedIp,S.local_preference,S.network_ip);if(!E){D({variant:"destructive",title:"Server IP not set.",description:"Please set the server IP in the form."});return}try{console.log(JSON.stringify(n)),await f(n,E),D({variant:"default",title:"Local Preference configuration generated!",description:"The configuration has been generated successfully."})}catch(e){console.error("Error:",e),D({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}},es=(e,r,t)=>{var n,s;return{router:e.name,asn:e.asn,mngt_ip:null!==(s=null===(n=e.mngt_ipv4)||void 0===n?void 0:n.split("/")[0])&&void 0!==s?s:"",network_to_announce:r,to:t}},ea=e=>{if(!y)return[];let r=[];return y.to.forEach(t=>{-1===t?r.push("Internet"):e.neighbors.filter(e=>e.asn===t).forEach(e=>{r.push({asn:e.asn,his_router_ip:e.ip})})}),r},ei=async()=>{if(!z||!y)return;let e=ee(z,y.router);if(e.length>1||!e.length){D({variant:"destructive",title:"Router not found.",description:"The router was not found."});return}let r=ea(e[0]),t=es(e[0],y.network_ip,r);if(!E){D({variant:"destructive",title:"Server IP not set.",description:"Please set the server IP in the form."});return}try{console.log(JSON.stringify(t)),await p(t,E),T(function(){var r;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...t,[e[0].name]:[...t[e[0].name]||[],...(null===(r=t[e[0].name])||void 0===r?void 0:r.includes(y.network_ip))?[]:[y.network_ip]]}}),D({variant:"default",title:"Announce configuration generated!",description:"The configuration has been generated successfully."})}catch(e){console.error("Error:",e),D({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}},el=(e,r)=>{var t,n;return{router:e.name,asn:e.asn,mngt_ip:null!==(n=null===(t=e.mngt_ipv4)||void 0===t?void 0:t.split("/")[0])&&void 0!==n?n:"",network_to_stop_announce:r}},eo=async()=>{if(!z||!_)return;let e=ee(z,_.router);if(e.length>1||!e.length){D({variant:"destructive",title:"Router not found.",description:"The router was not found."});return}let r=el(e[0],_.network_ip);if(!E){D({variant:"destructive",title:"Server IP not set.",description:"Please set the server IP in the form."});return}try{await x(r,E),T(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=_.router;return e[r]?{...e,[r]:e[r].filter(e=>e!==_.network_ip)}:e}),D({variant:"default",title:"Stop Announce configuration generated!",description:"The configuration has been generated successfully."})}catch(e){console.error("Error:",e),D({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}};return{form:Z,onSubmit:function(e){R(e.server_ip),r(Array(e.number_of_routers).fill({...o})),n(Array(e.number_of_hosts).fill({...d}))},routerConfigs:e,updateRouterConfig:(e,t)=>{r(r=>{let n=[...r];return n[e]=t,n})},hostConfigs:t,updateHostConfig:(e,r)=>{n(t=>{let n=[...t];return n[e]=r,n})},transitConfigs:v,peeringConfigs:b,localPreferenceConfigs:S,announceConfigs:y,stopAnnounceConfigs:_,announcedNetworks:I,isConfigGenerated:O,isDeploying:F,getNetworkTopologyResponse:()=>z,handleGenerateConfiguration:L,handleDeployNetwork:async()=>{if(q(!0),!E){D({variant:"destructive",title:"Server IP not set.",description:"Please set the server IP in the form."});return}try{await u(E),D({variant:"default",title:"Network deployed!",description:"The network has been deployed successfully."}),g({from:(null==z?void 0:z.routers[0].asn)||0,through:(null==z?void 0:z.routers[1].asn)||0,to:[(null==z?void 0:z.routers[2].asn)||0]}),N({fromAS:(null==z?void 0:z.routers[0].asn)||0,toAS:(null==z?void 0:z.routers[1].asn)||0}),w({asn:0,neighbor_router:"",local_preference:100,network_ip:""}),k({router:"",network_ip:"",to:[0]}),A({router:"",network_ip:""})}catch(e){console.error("Error:",e),D({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request: "+e})}finally{q(!1)}},handleTransitConfigsChange:e=>{g(e)},handlePeeringConfigsChange:e=>{N(e)},handleLocalPreferenceConfigsChange:e=>{w(e)},handleAnnounceConfigsChange:e=>{k(e)},handleStopAnnounceConfigsChange:e=>{A(e)},getAvailableASOptions:()=>z?Array.from(new Set(z.routers.map(e=>e.asn))):[],getAvailableASOptionsWithInternet:()=>{if(!z)return[];let e=Array.from(new Set(z.routers.map(e=>e.asn)));return e.push(-1),e},getAvailableRouters:()=>z?Array.from(new Set(z.routers)):[],handleTransitConfigsSend:Q,handlePeeringConfigsSend:K,handleLocalPreferenceConfigsSend:en,handleAnnounceConfigSend:ei,handleStopAnnounceConfigSend:eo}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(el,{...g,children:(0,n.jsxs)("form",{onSubmit:g.handleSubmit(b),className:"space-y-5 w-fit mx-auto",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(ed,{control:g.control,name:"number_of_routers",render:e=>{let{field:r}=e;return(0,n.jsxs)(em,{children:[(0,n.jsx)(eh,{children:"How many routers?"}),(0,n.jsx)(ef,{children:(0,n.jsx)(T,{type:"number",min:1,max:10,className:"w-full",...r})}),(0,n.jsx)(ep,{})]})}}),(0,n.jsx)(ed,{control:g.control,name:"number_of_hosts",render:e=>{let{field:r}=e;return(0,n.jsxs)(em,{children:[(0,n.jsx)(eh,{children:"How many hosts?"}),(0,n.jsx)(ef,{children:(0,n.jsx)(T,{type:"number",min:1,max:10,className:"w-full",...r})}),(0,n.jsx)(ep,{})]})}}),(0,n.jsx)(ed,{control:g.control,name:"server_ip",render:e=>{let{field:r}=e;return(0,n.jsxs)(em,{children:[(0,n.jsx)(eh,{children:"What is the server IP?"}),(0,n.jsx)(ef,{children:(0,n.jsx)(T,{type:"text",className:"w-full",...r})}),(0,n.jsx)(ep,{})]})}}),(0,n.jsx)(ed,{control:g.control,name:"project_name",render:e=>{let{field:r}=e;return(0,n.jsxs)(em,{children:[(0,n.jsx)(eh,{children:"What is the name of the project?"}),(0,n.jsx)(ef,{children:(0,n.jsx)(T,{type:"text",className:"w-full",...r})}),(0,n.jsx)(ep,{})]})}})]}),(0,n.jsx)(R,{type:"submit",className:"mx-auto w-full",children:"Submit"})]})}),(0,n.jsxs)("div",{className:"space-y-4 max-w-5xl lg:mx-auto my-10 mx-10",children:[(0,n.jsxs)(ev,{type:"single",collapsible:!0,value:t,onValueChange:v,children:[N.map((e,r)=>(0,n.jsxs)(eg,{value:"item-".concat(r+1),children:[(0,n.jsxs)(eb,{children:["Router ",r+1]}),(0,n.jsx)(ej,{children:(0,n.jsx)(Q,{initialValues:e,onChange:e=>S(r,e)})})]},r)),w.map((e,r)=>(0,n.jsxs)(eg,{value:"item-".concat(N.length+r+1),children:[(0,n.jsxs)(eb,{children:["Host ",r+1]}),(0,n.jsx)(ej,{children:(0,n.jsx)(X,{initialValues:e,onChange:e=>y(r,e)})})]},r))]}),N.length>0&&w.length>0&&N.every(e=>e.name&&e.asn&&e.interfaces.length>0&&e.neighbors.length>0&&e.interfaces.every(e=>e.name&&e.ip&&e.peer)&&e.neighbors.every(e=>e.ip&&e.asn))&&w.every(e=>e.name&&e.interfaces.length>0&&e.interfaces.every(e=>e.name&&(e.dhcp||e.ip))&&(e.interfaces.some(e=>e.dhcp)||e.gateway))&&(0,n.jsxs)("div",{className:"sm:space-x-3",children:[(0,n.jsx)(R,{className:"w-fit my-4",onClick:()=>F(N,w),children:"Generate Configuration"}),(0,n.jsxs)(R,{disabled:!E,className:"w-fit my-4",onClick:()=>q(),children:["Deploy Network ",O?(0,n.jsx)(en,{}):""]})]}),E&&V()&&(0,n.jsx)(et,{config:V()}),(0,n.jsxs)(ev,{type:"single",collapsible:!0,value:e,onValueChange:r,children:[k&&(0,n.jsxs)(eg,{value:"transit",children:[(0,n.jsx)(eb,{children:"Transit Policy Configuration"}),(0,n.jsxs)(ej,{children:[(0,n.jsx)(K,{initialValues:k,availableASOptions:J(),onChange:D}),(0,n.jsx)(R,{className:"w-fit",onClick:G,children:"Send Transit Configuration"})]})]}),_&&(0,n.jsxs)(eg,{value:"peering",children:[(0,n.jsx)(eb,{children:"Peering Policy Configuration"}),(0,n.jsxs)(ej,{children:[(0,n.jsx)(ee,{initialValues:_,availableASOptions:H(),onChange:Z}),(0,n.jsx)(R,{className:"w-fit",onClick:W,children:"Send Peering Configuration"})]})]}),A&&(0,n.jsxs)(eg,{value:"local-preference",children:[(0,n.jsx)(eb,{children:"Local Preference Configuration"}),(0,n.jsxs)(ej,{children:[(0,n.jsx)(eN,{initialValues:A,availableASOptions:H(),availableRouters:M(),onChange:L}),(0,n.jsx)(R,{className:"w-fit",onClick:Y,children:"Send Local Preference Configuration"})]})]}),I&&(0,n.jsxs)(eg,{value:"announce",children:[(0,n.jsx)(eb,{children:"Announce Network Configuration"}),(0,n.jsxs)(ej,{children:[(0,n.jsx)(eS,{initialValues:I,availableASOptions:J(),availableRouterOptions:M(),onChange:B}),(0,n.jsx)(R,{className:"w-fit",onClick:$,children:"Send Announce Configuration"})]})]}),z&&(0,n.jsxs)(eg,{value:"stop-announce",children:[(0,n.jsx)(eb,{children:"Stop Announce Network Configuration"}),(0,n.jsxs)(ej,{children:[(0,n.jsx)(ew,{initialValues:z,announcedNetworks:P,availableRouterOptions:M(),onChange:U}),(0,n.jsx)(R,{className:"w-fit",onClick:er,children:"Send Stop Announce Configuration"})]})]})]})]})]})}ej.displayName=ex.VY.displayName},5153:function(e,r,t){"use strict";t.d(r,{pm:function(){return m}});var n=t(2265);let s=0,a=new Map,i=e=>{if(a.has(e))return;let r=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,r)},l=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...r}=e,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,r]=n.useState(d);return n.useEffect(()=>(o.push(r),()=>{let e=o.indexOf(r);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var n=t(1994),s=t(3335);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}}},function(e){e.O(0,[597,251,540,971,117,744],function(){return e(e.s=5612)}),_N_E=e.O()}]);