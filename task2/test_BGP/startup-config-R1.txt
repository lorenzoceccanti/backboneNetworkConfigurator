! Command: show startup-config
! Startup-config last modified at Thu Feb 13 10:54:31 2025 by root
! device: R1 (cEOSLab, EOS-4.33.0F-39050855.4330F (engineering build))
!
no aaa root
!
management api http-commands
   no shutdown
!
dhcp server
   subnet 192.168.101.0/24
      range 192.168.101.10 192.168.101.99
      default-gateway 192.168.101.1
!
no service interface inactive port-id allocation disabled
!
transceiver qsfp default-mode 4x10G
!
service routing protocols model multi-agent
!
hostname R1
!
spanning-tree mode mstp
!
system l1
   unsupported speed action error
   unsupported error-correction action error
!
management api gnmi
   transport grpc default
!
management api netconf
   transport ssh default
!
interface Ethernet1
   no switchport
   ip address 131.114.28.1/24
!
interface Ethernet2
   no switchport
   ip address 132.114.28.2/24
!
interface Ethernet3
   no switchport
   ip address 192.168.101.1/24
   dhcp server ipv4
!
interface Loopback0
   ip address 1.1.1.1/32
!
interface Management0
   ip address 172.20.20.3/24
   ipv6 address 3fff:172:20:20::2/64
!
ip routing
!
   ipv6 address 3fff:172:20:20::2/64
!
ip routing
!
ip as-path access-list AS54020-IN permit ^54020$ any
ip as-path access-list AS54020-OUT permit ^54020$ any
ip as-path access-list AS55002-IN permit ^55002$ any
ip as-path access-list AS55002-OUT permit ^55002$ any
!
ip route 0.0.0.0/0 172.20.20.1
!
route-map RM-IN-54020 permit 10
   match as-path AS54020-IN
!
route-map RM-IN-55002 permit 10
   match as-path AS55002-IN
!
route-map RM-IN-55002 deny 99
!
route-map RM-OUT-54020 permit 10
   match as-path AS54020-OUT
!
route-map RM-OUT-55002 permit 10
   match as-path AS55002-OUT
!
router bgp 55001
   router-id 1.1.1.1
   bgp missing-policy direction in action deny
   bgp missing-policy direction out action deny
   neighbor 131.114.28.2 remote-as 55002
   neighbor 131.114.28.2 route-map RM-IN-55002 in
   neighbor 131.114.28.2 route-map RM-OUT-54020 out
   neighbor 132.114.28.1 remote-as 54020
   neighbor 132.114.28.1 route-map RM-IN-54020 in
   neighbor 132.114.28.1 route-map RM-OUT-55002 out
!
router multicast
   ipv4
      software-forwarding kernel
   !
   ipv6
      software-forwarding kernel
!
router ospf 1
   router-id 1.1.1.1
   network 192.168.101.0/24 area 0.0.0.0
   max-lsa 12000
!
end
R1#show startup-config
! Command: show startup-config
! Startup-config last modified at Thu Feb 13 10:54:31 2025 by root
! device: R1 (cEOSLab, EOS-4.33.0F-39050855.4330F (engineering build))
!
no aaa root
!
management api http-commands
   no shutdown
!
dhcp server
   subnet 192.168.101.0/24
      range 192.168.101.10 192.168.101.99
      default-gateway 192.168.101.1
!
no service interface inactive port-id allocation disabled
!
transceiver qsfp default-mode 4x10G
!
service routing protocols model multi-agent
!
hostname R1
!
spanning-tree mode mstp
!
system l1
   unsupported speed action error
   unsupported error-correction action error
!
management api gnmi
   transport grpc default
!
management api netconf
   transport ssh default
!
interface Ethernet1
   no switchport
   ip address 131.114.28.1/24
!
interface Ethernet2
   no switchport
   ip address 132.114.28.2/24
!
interface Ethernet3
   no switchport
   ip address 192.168.101.1/24
   dhcp server ipv4
!
interface Loopback0
   ip address 1.1.1.1/32
!
interface Management0
   ip address 172.20.20.3/24
   ipv6 address 3fff:172:20:20::2/64
!
ip routing
!
ip as-path access-list AS54020-IN permit ^54020$ any
ip as-path access-list AS54020-OUT permit ^54020$ any
ip as-path access-list AS55002-IN permit ^55002$ any
ip as-path access-list AS55002-OUT permit ^55002$ any
!
ip route 0.0.0.0/0 172.20.20.1
!
route-map RM-IN-54020 permit 10
   match as-path AS54020-IN
!
route-map RM-IN-55002 permit 10
   match as-path AS55002-IN
!
route-map RM-IN-55002 deny 99
!
route-map RM-OUT-54020 permit 10
   match as-path AS54020-OUT
!
route-map RM-OUT-55002 permit 10
   match as-path AS55002-OUT
!
router bgp 55001
   router-id 1.1.1.1
   bgp missing-policy direction in action deny
   bgp missing-policy direction out action deny
   neighbor 131.114.28.2 remote-as 55002
   neighbor 131.114.28.2 route-map RM-IN-55002 in
   neighbor 131.114.28.2 route-map RM-OUT-54020 out
   neighbor 132.114.28.1 remote-as 54020
   neighbor 132.114.28.1 route-map RM-IN-54020 in
   neighbor 132.114.28.1 route-map RM-OUT-55002 out
!
router multicast
   ipv4
      software-forwarding kernel
   !
   ipv6
      software-forwarding kernel
!
router ospf 1
   router-id 1.1.1.1
   network 192.168.101.0/24 area 0.0.0.0
   max-lsa 12000
!
end